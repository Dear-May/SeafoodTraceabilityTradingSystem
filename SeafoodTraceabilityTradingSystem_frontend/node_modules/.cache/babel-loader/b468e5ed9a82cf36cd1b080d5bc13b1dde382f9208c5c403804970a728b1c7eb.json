{"ast":null,"code":"import { useUserShop } from \"@/composables/useShopUser\";\nimport { onMounted, ref } from \"vue\";\nimport router from \"@/router\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  __name: 'StoreHeaderView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    const {\n      shopForm,\n      initUserSession,\n      initShopInfo\n    } = useUserShop();\n    const headerTitle = ref();\n    function setTitle(title) {\n      headerTitle.value = title;\n    }\n    function logout() {\n      sessionStorage.removeItem('ShopUserBaseInfoSession');\n      document.cookie = \"ShopUserBaseInfo=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\";\n      ElMessage.success(\"登出成功\");\n      setTimeout(() => {\n        router.replace(\"/store/login\");\n      }, 1500);\n    }\n    __expose({\n      setTitle\n    });\n    onMounted(async () => {\n      initUserSession();\n      await initShopInfo();\n    });\n    const __returned__ = {\n      shopForm,\n      initUserSession,\n      initShopInfo,\n      headerTitle,\n      setTitle,\n      logout,\n      get useUserShop() {\n        return useUserShop;\n      },\n      onMounted,\n      ref,\n      get router() {\n        return router;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useUserShop","onMounted","ref","router","ElMessage","shopForm","initUserSession","initShopInfo","headerTitle","setTitle","title","value","logout","sessionStorage","removeItem","document","cookie","success","setTimeout","replace","__expose"],"sources":["D:/Cache/Java/shopping/shoppping_c_frontend/src/components/StoreHeaderView.vue"],"sourcesContent":["<template>\r\n  <nav class=\"navbar navbar-light bg-white border-bottom shadow-sm\">\r\n    <div class=\"container-fluid\">\r\n      <span class=\"navbar-brand mb-0 h1\">{{ headerTitle }}</span>\r\n      <div>\r\n        <el-dropdown>\r\n          <el-avatar size=\"medium\">\r\n            <img :src=\"shopForm.shopAvatar\" alt=\"avatar\"/>\r\n          </el-avatar>\r\n          <template #dropdown>\r\n            <el-dropdown-menu>\r\n              <el-dropdown-item>Action 1</el-dropdown-item>\r\n              <el-dropdown-item @click=\"logout\" divided>登出</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </template>\r\n        </el-dropdown>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script setup>\r\nimport {useUserShop} from \"@/composables/useShopUser\";\r\nimport {defineExpose, onMounted, ref} from \"vue\";\r\nimport router from \"@/router\";\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nconst {shopForm, initUserSession, initShopInfo} = useUserShop();\r\nconst headerTitle = ref()\r\n\r\nfunction setTitle(title) {\r\n  headerTitle.value = title;\r\n}\r\n\r\nfunction logout() {\r\n  sessionStorage.removeItem('ShopUserBaseInfoSession');\r\n  document.cookie = \"ShopUserBaseInfo=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\";\r\n  ElMessage.success(\"登出成功\")\r\n  setTimeout(() => {\r\n    router.replace(\"/store/login\")\r\n  }, 1500);\r\n}\r\n\r\ndefineExpose({setTitle})\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  await initShopInfo();\r\n\r\n});\r\n</script>"],"mappings":"AAsBA,SAAQA,WAAW,QAAO,2BAA2B;AACrD,SAAsBC,SAAS,EAAEC,GAAG,QAAO,KAAK;AAChD,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAAQC,SAAS,QAAO,cAAc;;;;;;IAEtC,MAAM;MAACC,QAAQ;MAAEC,eAAe;MAAEC;IAAY,CAAC,GAAGP,WAAW,CAAC,CAAC;IAC/D,MAAMQ,WAAW,GAAGN,GAAG,CAAC,CAAC;IAEzB,SAASO,QAAQA,CAACC,KAAK,EAAE;MACvBF,WAAW,CAACG,KAAK,GAAGD,KAAK;IAC3B;IAEA,SAASE,MAAMA,CAAA,EAAG;MAChBC,cAAc,CAACC,UAAU,CAAC,yBAAyB,CAAC;MACpDC,QAAQ,CAACC,MAAM,GAAG,iEAAiE;MACnFZ,SAAS,CAACa,OAAO,CAAC,MAAM,CAAC;MACzBC,UAAU,CAAC,MAAM;QACff,MAAM,CAACgB,OAAO,CAAC,cAAc,CAAC;MAChC,CAAC,EAAE,IAAI,CAAC;IACV;IAEAC,QAAY,CAAC;MAACX;IAAQ,CAAC,CAAC;IAExBR,SAAS,CAAC,YAAY;MACpBK,eAAe,CAAC,CAAC;MACjB,MAAMC,YAAY,CAAC,CAAC;IAEtB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}