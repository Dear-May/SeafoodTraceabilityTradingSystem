{"ast":null,"code":"import { createVNode as _createVNode, resolveComponent as _resolveComponent, withKeys as _withKeys, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nimport _imports_0 from '@/images/Trash_icon.png';\nconst _hoisted_1 = {\n  class: \"my-haichao-page\"\n};\nconst _hoisted_2 = {\n  class: \"main-content\"\n};\nconst _hoisted_3 = {\n  class: \"search-container\"\n};\nconst _hoisted_4 = {\n  class: \"product-list\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"product-info\"\n};\nconst _hoisted_8 = {\n  class: \"product-title\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"product-price\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"product-price\",\n  style: {\n    \"color\": \"#4c4c4c\"\n  }\n};\nconst _hoisted_11 = {\n  class: \"button-container\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode($setup[\"HeaderComponent\"]), _createVNode($setup[\"SidebarComponent\"], {\n    ref: \"sidebarComponent\"\n  }, null, 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n    type: \"text\",\n    modelValue: $setup.searchQuery,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n    placeholder: \"搜索宝贝...\",\n    class: \"search-input\",\n    onKeyup: _withKeys($setup.filterProducts, [\"enter\"])\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"button\", {\n    onClick: $setup.filterProducts,\n    class: \"search-button\"\n  }, _cache[1] || (_cache[1] = [_createElementVNode(\"a\", {\n    class: \"bi bi-search\",\n    style: {\n      \"color\": \"whitesmoke\"\n    }\n  }, null, -1 /* HOISTED */)]))]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredHistoricalData, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"product-card\",\n      onClick: $event => $setup.handleProductDetail(item),\n      key: item.goodID\n    }, [_createElementVNode(\"img\", {\n      src: item.showURL,\n      alt: \"product image\",\n      class: \"product-image\"\n    }, null, 8 /* PROPS */, _hoisted_6), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", _hoisted_8, _toDisplayString(item.goodName), 1 /* TEXT */), item.status ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \"￥\" + _toDisplayString(item.price), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_10, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"a\", {\n      class: \"bi bi-x-circle-fill\",\n      style: {\n        \"color\": \"#4c4c4c\"\n      }\n    }, null, -1 /* HOISTED */), _createTextVNode(\"已下架 \")]))]))]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $setup.handleProductDetail(item), [\"stop\"])\n    }, \"进入店铺\", 8 /* PROPS */, _hoisted_12), _createElementVNode(\"button\", {\n      onClick: _withModifiers($event => _ctx.findSimilar(item), [\"stop\"])\n    }, \"按图找相似\", 8 /* PROPS */, _hoisted_13)]), _createElementVNode(\"div\", {\n      class: \"trash-icon\",\n      onClick: event => {\n        event.stopPropagation();\n        $setup.DeleteProduct(item.goodID);\n      }\n    }, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"img\", {\n      src: _imports_0,\n      alt: \"Trash Icon\",\n      class: \"trash-image\"\n    }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_14)], 8 /* PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createVNode($setup[\"FooterComponent\"]), _createVNode($setup[\"RightWidgetComponent\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","class","key","style","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","$setup","ref","_hoisted_2","_hoisted_3","_component_el_input","type","modelValue","searchQuery","_cache","$event","placeholder","onKeyup","_withKeys","filterProducts","onClick","_hoisted_4","_renderList","filteredHistoricalData","item","handleProductDetail","goodID","src","showURL","alt","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","goodName","status","_hoisted_9","price","_hoisted_10","_createTextVNode","_hoisted_11","_withModifiers","_hoisted_12","_ctx","findSimilar","_hoisted_13","event","stopPropagation","DeleteProduct","_hoisted_14","_hoisted_5"],"sources":["D:\\Cache\\Java\\shopping\\shoppping_c_frontend\\src\\views\\MyFavoriteView.vue"],"sourcesContent":["<template>\r\n  <div class=\"my-haichao-page\">\r\n    <HeaderComponent/>\r\n    <SidebarComponent ref=\"sidebarComponent\"/>\r\n\r\n    <div class=\"main-content\">\r\n      <div class=\"search-container\">\r\n        <el-input type=\"text\" v-model=\"searchQuery\" placeholder=\"搜索宝贝...\" class=\"search-input\"\r\n                  @keyup.enter=\"filterProducts\"/>\r\n        <button @click=\"filterProducts\" class=\"search-button\">\r\n          <a class=\"bi bi-search\" style=\"color:whitesmoke;\"></a>\r\n        </button>\r\n      </div>\r\n      <div class=\"product-list\">\r\n        <div class=\"product-card\" @click=\"handleProductDetail(item)\" v-for=\"item in filteredHistoricalData\"\r\n             :key=\"item.goodID\">\r\n          <img :src=\"item.showURL\" alt=\"product image\" class=\"product-image\"/>\r\n          <div class=\"product-info\">\r\n            <p class=\"product-title\">{{ item.goodName }}</p>\r\n            <p class=\"product-price\" v-if=\"item.status\">￥{{ item.price }}</p>\r\n            <p class=\"product-price\" style=\"color: #4c4c4c;\" v-else>\r\n              <a class=\"bi bi-x-circle-fill\" style=\"color: #4c4c4c;\"></a>已下架\r\n            </p>\r\n          </div>\r\n          <div class=\"button-container\">\r\n            <button @click.stop=\"handleProductDetail(item)\">进入店铺</button>\r\n            <button @click.stop=\"findSimilar(item)\">按图找相似</button>\r\n          </div>\r\n          <div class=\"trash-icon\" @click=\"(event) => { event.stopPropagation(); DeleteProduct(item.goodID); }\">\r\n            <img src=\"@/images/Trash_icon.png\" alt=\"Trash Icon\" class=\"trash-image\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <FooterComponent/>\r\n  <RightWidgetComponent/>\r\n</template>\r\n\r\n<script setup>\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport router from \"@/router\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport {onMounted, ref} from 'vue';\r\nimport {ElMessage} from \"element-plus\";\r\nimport axios from 'axios';\r\nimport SidebarComponent from \"@/components/SidebarComponent.vue\";\r\nimport useUser from \"@/composables/useUser\";\r\n\r\nconst {UserInfoForm, initUserSession} = useUser()\r\n\r\nconst sidebarComponent = ref(null);\r\n\r\nfunction initSidebar() {\r\n  sidebarComponent.value.setActive(7);\r\n}\r\n\r\nfunction handleProductDetail(product) {\r\n  router.push('/goodDetail?id=' + product.goodID);\r\n}\r\n\r\nconst historicalData = ref([]);\r\nconst searchQuery = ref('');\r\nconst filteredHistoricalData = ref([]);\r\n\r\nfunction filterProducts() {\r\n  // 检查搜索查询是否为空\r\n  if (!searchQuery.value.trim()) {\r\n    // 如果为空，直接展示所有历史数据\r\n    filteredHistoricalData.value = historicalData.value;\r\n    return;\r\n  }\r\n\r\n  // 根据关键词过滤历史数据\r\n  filteredHistoricalData.value = historicalData.value\r\n      .filter(item => item.goodName.toLowerCase().includes(searchQuery.value.toLowerCase()))\r\n      .map(item => ({\r\n        status: item.status,\r\n        uplodatime: item.uplodatime,\r\n        location: item.location,\r\n        shopID: item.shopID,\r\n        goodName: item.goodName,\r\n        comments: item.comments,\r\n        price: item.price,\r\n        goodID: item.goodID,\r\n        showURL: item.showURL\r\n      }));\r\n}\r\n\r\nasync function init() {\r\n  try {\r\n    const response = await axios.post('/api/good/findFavourite', {\r\n      userId: UserInfoForm.value.id\r\n    }, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data !== null) {\r\n      historicalData.value = response.data;\r\n      filteredHistoricalData.value = historicalData.value;\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error(\"获取收藏数据失败\")\r\n  }\r\n}\r\n\r\nasync function DeleteProduct(goodID) {\r\n  try {\r\n    const response = await axios.post('/api/good/deleteFavourite', {\r\n      userId: UserInfoForm.value.id,\r\n      goodId: goodID\r\n    }, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data.code === 200) {\r\n      await init();\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error(\"取消收藏失败1\")\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"取消收藏失败\")\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  await init();\r\n  initSidebar();\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.my-haichao-page {\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-family: Arial, sans-serif;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  margin-top: 90px;\r\n  min-height: calc(90vh - 100px);\r\n}\r\n\r\n.search-box {\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.history-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.product-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n}\r\n\r\n.product-list > div {\r\n  flex-basis: calc(20% - 20px); /* 每个子元素占据 25% 的宽度，减去间距 */\r\n}\r\n\r\n.product-card {\r\n  width: 200px;\r\n  background-color: #fff;\r\n  border: 1px solid #eaeaea;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  transition: transform 0.3s;\r\n  position: relative;\r\n}\r\n\r\n.product-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\r\n  border: 1px solid #e02020;\r\n}\r\n\r\n.product-image {\r\n  width: 100%;\r\n  height: 75%;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n}\r\n\r\n.trash-icon {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  display: none; /* 默认隐藏 */\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  border-radius: 0 0 0 8px;\r\n}\r\n\r\n.product-card:hover .trash-icon {\r\n  display: block; /* 悬浮时显示 */\r\n}\r\n\r\n.trash-image {\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 5px;\r\n  /* 其他样式 */\r\n}\r\n\r\n.product-info {\r\n  padding: 10px;\r\n}\r\n\r\n.product-title {\r\n  font-size: 14px;\r\n  color: #333;\r\n  margin: 5px 0;\r\n}\r\n\r\n.product-price {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #ff0000;\r\n}\r\n\r\n.search-container {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-right: 20px;\r\n}\r\n\r\n.search-input {\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  border: 2px solid #ccc;\r\n  border-radius: 8px 0 0 8px;\r\n  outline: none;\r\n  width: 200px;\r\n  border-right: none;\r\n}\r\n\r\n.search-input:hover {\r\n  border-color: #e02020;\r\n}\r\n\r\n.search-button {\r\n  padding: 10px 20px;\r\n  background-color: #e02020;\r\n  color: white;\r\n  font-size: 16px;\r\n  border: 2px solid #e02020;\r\n  border-radius: 0 8px 8px 0;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n}\r\n\r\n.search-button:hover {\r\n  background-color: #c21a1a;\r\n  border-color: #c21a1a;\r\n}\r\n\r\n.night-mode {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .body {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .header {\r\n  background-color: #3c3c3c;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .sidebar {\r\n  background-color: #3c3c3c;\r\n  border-right: 1px solid #444;\r\n}\r\n\r\n.night-mode .sidebar .el-menu-item {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .sidebar.el-menu-item:hover {\r\n  background-color: #4c4c4c;\r\n}\r\n\r\n.night-mode .main-content,\r\n.night-mode .profile-section,\r\n.night-mode .order-section,\r\n.night-mode .logistics-section,\r\n.night-mode .logistics-item,\r\n.night-mode .profile-card,\r\n.night-mode .promotion-card {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .order-icon,\r\n.night-mode .logistics-action {\r\n  color: #ffa500;\r\n}\r\n\r\n.night-mode .right-widget {\r\n  background-color: #3c3c3c;\r\n  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .footer {\r\n  background-color: #2e2e2e;\r\n  border-top: 1px solid #333;\r\n}\r\n\r\n.night-mode .footer-links a {\r\n  color: #ffffff;\r\n}\r\n\r\n.night-mode .footer-links a:hover {\r\n  color: #e02020;\r\n}\r\n\r\n.night-mode .product-card {\r\n  background-color: #3c3c3c;\r\n}\r\n\r\n.night-mode .search-input {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.button-container {\r\n  position: absolute;\r\n  width: 100%;\r\n  top: 66%;\r\n  display: none; /* 默认隐藏 */\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  justify-content: space-between;\r\n  padding: 5px 0;\r\n}\r\n\r\n.product-card:hover .button-container {\r\n  display: block; /* 悬浮时显示 */\r\n}\r\n\r\n.button-container button {\r\n  background-color: transparent;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 10px;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n  font-size: 18px;\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}