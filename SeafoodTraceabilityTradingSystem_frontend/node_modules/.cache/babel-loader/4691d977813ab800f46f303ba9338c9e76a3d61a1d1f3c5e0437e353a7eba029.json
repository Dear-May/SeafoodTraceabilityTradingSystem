{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from \"vue\";\nimport router from \"@/router\";\nimport axios from \"axios\";\nimport AddAddressComponent from \"@/components/AddAddressComponent.vue\";\nimport { Document, Location, Setting, User } from \"@element-plus/icons-vue\";\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\nimport FooterComponent from \"@/components/FooterComponent.vue\";\nimport AvatarChangComponent from \"@/components/AvatarChangComponent.vue\";\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\nimport { ElMessage } from \"element-plus\";\nimport provincesData from \"@/assets/province.json\";\nimport citiesData from \"@/assets/city.json\";\nimport areasData from \"@/assets/area.json\";\nimport streetsData from \"@/assets/street.json\";\nimport useUser from \"@/composables/useUser\";\nexport default {\n  __name: 'AddressView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      UserInfoForm,\n      initUserSession\n    } = useUser();\n    const addressList = ref([]);\n    async function getAddressList() {\n      try {\n        const response = await axios.post('/api/addresses/getAllAddresses', {\n          userId: UserInfoForm.value.id\n        }, {\n          headers: {\n            'Content-Type': 'application/json;charset=UTF-8'\n          },\n          withCredentials: true\n        });\n        if (response.data) {\n          addressList.value = response.data.map(address => ({\n            id: address.id,\n            receiver: address.consignee,\n            phone: address.phone,\n            region: address.area,\n            address: address.detailed_address,\n            postalCode: '000000',\n            isDefault: address.status === 'default'\n          }));\n        } else {\n          ElMessage.error('获取地址列表失败');\n        }\n      } catch (err) {\n        ElMessage.error('获取地址列表失败');\n      }\n    }\n    const showUpdateAddressDialog = ref(false);\n    const selectedAddress = ref([]);\n    const detailedAddress = ref('');\n    const consignee = ref('');\n    const phoneNumber = ref('');\n    const setAsDefault = ref(false);\n    const updateid = ref('');\n    const detailedAddressError = ref(false);\n    const consigneeError = ref(false);\n    const phoneNumberError = ref(false);\n    const addressOptions = ref([]);\n    async function getAddressOptions(region) {\n      const lastAddress = ref();\n      let isCity = false;\n      try {\n        const response = await axios.post('/api/addresses/addressToId', {\n          address: region\n        }, {\n          headers: {\n            'Content-Type': 'application/json;charset=UTF-8'\n          },\n          withCredentials: true\n        });\n        if (response.data) {\n          try {\n            lastAddress.value = response.data.options[0].children[0].children[0].children[0];\n          } catch (e) {\n            lastAddress.value = response.data.options[0].children[0].children[0];\n            isCity = true;\n          }\n          if (!isCity) selectedAddress.value = [response.data.options[0].value, response.data.options[0].children[0].value, response.data.options[0].children[0].children[0].value, lastAddress.value.value];else selectedAddress.value = [response.data.options[0].value, response.data.options[0].children[0].value, lastAddress.value.value];\n        } else {\n          ElMessage.error('获取地址失败');\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    function updateAddressBaseInfo(row) {\n      selectedAddress.value = row.region;\n      detailedAddress.value = row.address;\n      consignee.value = row.receiver;\n      phoneNumber.value = row.phone;\n      setAsDefault.value = row.isDefault;\n      getAddressOptions(row.region);\n      updateid.value = row.id;\n      showUpdateAddressDialog.value = true;\n    }\n    const loadAddressOptions = () => {\n      addressOptions.value = provincesData.map(province => ({\n        value: province.id,\n        label: province.name,\n        children: (citiesData[province.id] || []).map(city => ({\n          value: city.id,\n          label: city.name,\n          children: (areasData[city.id] || []).map(area => ({\n            value: area.id,\n            label: area.name,\n            children: (streetsData[area.id] || []).map(street => ({\n              value: street.id,\n              label: street.name\n            }))\n          }))\n        }))\n      }));\n    };\n    async function saveAddress() {\n      detailedAddressError.value = !detailedAddress.value;\n      consigneeError.value = !consignee.value;\n      phoneNumberError.value = !phoneNumber.value;\n      if (detailedAddressError.value || consigneeError.value || phoneNumberError.value || !selectedAddress.value.length) {\n        return;\n      }\n      try {\n        const response = await axios.post('/api/addresses/updateAddress', {\n          userId: UserInfoForm.value.id,\n          addressId: updateid.value,\n          consignee: consignee.value,\n          phone: phoneNumber.value,\n          area: selectedAddress.value.join(' '),\n          detailed_address: detailedAddress.value,\n          is_default: setAsDefault.value\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.status === 200) {\n          ElMessage.success(\"添加地址成功\");\n          setTimeout(() => {\n            window.location.reload();\n          }, 500);\n        } else {\n          ElMessage.error(\"添加地址失败\");\n        }\n      } catch (e) {\n        ElMessage.error(\"添加地址失败\");\n      } finally {\n        showUpdateAddressDialog.value = false;\n      }\n    }\n    function clearForm_update() {\n      selectedAddress.value = [];\n      detailedAddress.value = '';\n      consignee.value = '';\n      phoneNumber.value = '';\n      setAsDefault.value = false;\n      detailedAddressError.value = false;\n      consigneeError.value = false;\n      phoneNumberError.value = false;\n      updateid.value = \"\";\n      showUpdateAddressDialog.value = false;\n    }\n    async function deleteAddress(row) {\n      try {\n        const response = await axios.post('/api/addresses/deleteAddress', {\n          addressId: row.id,\n          userId: UserInfoForm.value.id\n        }, {\n          headers: {\n            'Content-Type': 'application/json;charset=UTF-8'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 200) {\n          ElMessage.success('删除地址成功');\n          setTimeout(() => {\n            window.location.reload();\n          }, 500);\n        } else {\n          ElMessage.error('删除地址失败');\n        }\n      } catch (err) {\n        ElMessage.error('删除地址失败');\n      }\n    }\n    async function setDefault(row) {\n      try {\n        const response = await axios.post('/api/addresses/updateDefault', {\n          userId: UserInfoForm.value.id,\n          addressId: row.id\n        }, {\n          headers: {\n            'Content-Type': 'application/json;charset=UTF-8'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 200) {\n          ElMessage.success('设置默认地址成功');\n          addressList.value.forEach(address => address.isDefault = false);\n          row.isDefault = true;\n        } else {\n          ElMessage.error('设置默认地址失败');\n        }\n      } catch (err) {\n        ElMessage.error('设置默认地址失败');\n      }\n    }\n    function handleAccountInfo() {\n      setTimeout(() => {\n        router.push('/profile/account_information');\n      }, 500);\n    }\n    function handlePersonalSetting() {\n      setTimeout(() => {\n        router.push('/profile/account_profile');\n      }, 500);\n    }\n    function handleForgetPassword() {\n      setTimeout(() => {\n        router.replace('/forgotPassword');\n      }, 500);\n    }\n    onMounted(async () => {\n      initUserSession();\n      await getAddressList();\n      loadAddressOptions();\n    });\n    const __returned__ = {\n      UserInfoForm,\n      initUserSession,\n      addressList,\n      getAddressList,\n      showUpdateAddressDialog,\n      selectedAddress,\n      detailedAddress,\n      consignee,\n      phoneNumber,\n      setAsDefault,\n      updateid,\n      detailedAddressError,\n      consigneeError,\n      phoneNumberError,\n      addressOptions,\n      getAddressOptions,\n      updateAddressBaseInfo,\n      loadAddressOptions,\n      saveAddress,\n      clearForm_update,\n      deleteAddress,\n      setDefault,\n      handleAccountInfo,\n      handlePersonalSetting,\n      handleForgetPassword,\n      onMounted,\n      ref,\n      get router() {\n        return router;\n      },\n      get axios() {\n        return axios;\n      },\n      AddAddressComponent,\n      get Document() {\n        return Document;\n      },\n      get Location() {\n        return Location;\n      },\n      get Setting() {\n        return Setting;\n      },\n      get User() {\n        return User;\n      },\n      HeaderComponent,\n      FooterComponent,\n      AvatarChangComponent,\n      RightWidgetComponent,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get provincesData() {\n        return provincesData;\n      },\n      get citiesData() {\n        return citiesData;\n      },\n      get areasData() {\n        return areasData;\n      },\n      get streetsData() {\n        return streetsData;\n      },\n      get useUser() {\n        return useUser;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","router","axios","AddAddressComponent","Document","Location","Setting","User","HeaderComponent","FooterComponent","AvatarChangComponent","RightWidgetComponent","ElMessage","provincesData","citiesData","areasData","streetsData","useUser","UserInfoForm","initUserSession","addressList","getAddressList","response","post","userId","value","id","headers","withCredentials","data","map","address","receiver","consignee","phone","region","area","detailed_address","postalCode","isDefault","status","error","err","showUpdateAddressDialog","selectedAddress","detailedAddress","phoneNumber","setAsDefault","updateid","detailedAddressError","consigneeError","phoneNumberError","addressOptions","getAddressOptions","lastAddress","isCity","options","children","e","console","log","updateAddressBaseInfo","row","loadAddressOptions","province","label","name","city","street","saveAddress","length","addressId","join","is_default","success","setTimeout","window","location","reload","clearForm_update","deleteAddress","code","setDefault","forEach","handleAccountInfo","push","handlePersonalSetting","handleForgetPassword","replace"],"sources":["D:/Cache/Java/shopping/shoppping_c_frontend/src/views/AddressView.vue"],"sourcesContent":["<template>\r\n  <div class=\"account-management-page\">\r\n    <HeaderComponent/>\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary sidebar\"\r\n             style=\"width: 280px; height: 75vh;\">\r\n          <AvatarChangComponent/>\r\n          <hr>\r\n          <el-menu\r\n              active-text-color=\"#e02020\"\r\n              background-color=\"#d3d3d3\"\r\n              class=\"el-menu-vertical-demo\"\r\n              default-active=\"2\"\r\n              text-color=\"#303133\"\r\n              @open=\"handleOpen\"\r\n              @close=\"handleClose\"\r\n              style=\"border-radius: 10px;\"\r\n          >\r\n            <el-sub-menu index=\"1\">\r\n              <template #title>\r\n                <el-icon>\r\n                  <user/>\r\n                </el-icon>\r\n                <span style=\"font-weight: bold; font-size: 18px;\">账号管理</span>\r\n              </template>\r\n              <el-menu-item-group>\r\n                <el-menu-item index=\"1-1\" style=\"font-size: 16px; font-weight: bold;\" @click=\"handleAccountInfo\">\r\n                  安全设置\r\n                </el-menu-item>\r\n                <el-menu-item index=\"1-2\" style=\"font-size: 16px; font-weight: bold;\" @click=\"handlePersonalSetting\">\r\n                  个性设置\r\n                </el-menu-item>\r\n              </el-menu-item-group>\r\n            </el-sub-menu>\r\n            <el-menu-item index=\"2\">\r\n              <el-icon>\r\n                <Location/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\">售后地址管理</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"3\">\r\n              <el-icon>\r\n                <document/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\">帮助中心</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"4\">\r\n              <el-icon>\r\n                <setting/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\" @click=\"handleForgetPassword\">忘记密码</span>\r\n            </el-menu-item>\r\n          </el-menu>\r\n          <template>\r\n            <footer>\r\n              <hr>\r\n            </footer>\r\n          </template>\r\n        </div>\r\n        <div class=\"col-9 main-content\">\r\n          <div class=\"row\">\r\n            <div class=\"col-10\">\r\n              <h4 style=\"text-align: left; font-weight: bold;\">我的收货地址</h4>\r\n              <p style=\"text-align: left;\" class=\"mt-2\">常用地址</p>\r\n            </div>\r\n            <div class=\"col-2\">\r\n              <AddAddressComponent/>\r\n            </div>\r\n          </div>\r\n          <div class=\"binding-table\">\r\n            <el-table :data=\"addressList\" style=\"width: 100%\" class=\"m-3\">\r\n              <el-table-column prop=\"receiver\" label=\"收货人\"></el-table-column>\r\n              <el-table-column prop=\"phone\" label=\"电话/手机\"></el-table-column>\r\n              <el-table-column prop=\"region\" label=\"所在地区\" width=\"200\"></el-table-column>\r\n              <el-table-column prop=\"address\" label=\"详细地址\"></el-table-column>\r\n              <el-table-column prop=\"postalCode\" label=\"邮编\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"180\">\r\n                <template #default=\"scope\">\r\n                  <el-button type=\"text\" size=\"small\" @click=\"updateAddressBaseInfo(scope.row)\">修改</el-button>\r\n                  <el-button type=\"text\" size=\"small\" @click=\"deleteAddress(scope.row)\">删除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"移动设置\" width=\"150\">\r\n                <template #default=\"scope\">\r\n                  <el-button v-if=\"scope.row.isDefault\" type=\"primary\" size=\"small\" disabled>默认地址</el-button>\r\n                  <el-button v-else type=\"text\" size=\"small\" @click=\"setDefault(scope.row)\">设为默认</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n          <el-dialog v-model=\"showUpdateAddressDialog\" title=\"添加收货地址\" width=\"700px\" align-center\r\n                     style=\"border-radius: 20px;\">\r\n            <div class=\"address-form\">\r\n              <div class=\"row\">\r\n                <label for=\"details\" class=\"form-label col-5 mt-2\" style=\"align-items: center;\">\r\n                  <a style=\"color: #e02020;\">*&nbsp;&nbsp;</a> 详细地址：</label>\r\n                <el-cascader class=\"col-7\" v-model=\"selectedAddress\" :options=\"addressOptions\"\r\n                             placeholder=\"请选择省/市/区/街道\"\r\n                             style=\"width: 55%; margin-bottom: 20px;\"/>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"row\">\r\n                  <label for=\"details\" class=\"form-label col-5 mt-3\">\r\n                    <a style=\"color: #e02020;\">*&nbsp;&nbsp;</a>\r\n                    详细地址：</label>\r\n                  <el-input v-model=\"detailedAddress\" type=\"textarea\" class=\"col-8\"\r\n                            placeholder=\"请输入详细地址，详细地址长度需要在2-120个汉字或字符，不能包含特殊字符\"\r\n                            maxlength=\"120\"\r\n                            show-word-limit style=\"width: 55%;\"/>\r\n                </div>\r\n                <span class=\"error-message\"\r\n                      v-if=\"detailedAddressError\">详细地址长度需要在2-120个汉字或字符，不能包含特殊字符</span>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"row\">\r\n                  <label for=\"consignee\" class=\"form-label col-5 mt-3\">\r\n                    <a style=\"color: #e02020;\">*&nbsp;&nbsp;</a>\r\n                    收货人姓名：</label>\r\n                  <el-input v-model=\"consignee\" placeholder=\"长度不超过25个字符，不能包含特殊字符\" maxlength=\"25\"\r\n                            style=\"width: 55%;\" class=\"col-7\"/>\r\n                </div>\r\n                <span class=\"error-message\"\r\n                      v-if=\"consigneeError\">收货人姓名长度需要在1-25个汉字或字符之间，不能包含特殊字符</span>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <div class=\"row\">\r\n                  <label for=\"phone\" class=\"form-label col-5 mt-3\">\r\n                    <a style=\"color: #e02020;\">*&nbsp;&nbsp;</a>\r\n                    手机号：</label>\r\n                  <el-input v-model=\"phoneNumber\" placeholder=\"手机号必须填写一项，手机号码不能包含空格\"\r\n                            maxlength=\"11\"\r\n                            style=\"width: 50%;\" class=\"col-7\"/>\r\n                </div>\r\n                <span class=\"error-message\" v-if=\"phoneNumberError\">手机号码不能为空</span>\r\n              </div>\r\n              <el-checkbox v-model=\"setAsDefault\" style=\"margin-top: 20px;\">设置为默认收货地址</el-checkbox>\r\n            </div>\r\n            <template #footer>\r\n              <div class=\"dialog-footer\">\r\n                <el-button @click=\"clearForm_update\" class=\"cancel-button\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"saveAddress\" class=\"confirm-button\">确认</el-button>\r\n              </div>\r\n            </template>\r\n          </el-dialog>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <RightWidgetComponent/>\r\n  <FooterComponent/>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref} from \"vue\";\r\nimport router from \"@/router\";\r\nimport axios from \"axios\";\r\nimport AddAddressComponent from \"@/components/AddAddressComponent.vue\"\r\nimport {Document, Location, Setting, User} from \"@element-plus/icons-vue\";\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport AvatarChangComponent from \"@/components/AvatarChangComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport provincesData from \"@/assets/province.json\";\r\nimport citiesData from \"@/assets/city.json\";\r\nimport areasData from \"@/assets/area.json\";\r\nimport streetsData from \"@/assets/street.json\";\r\nimport useUser from \"@/composables/useUser\";\r\n\r\nconst {UserInfoForm, initUserSession} = useUser()\r\n\r\nconst addressList = ref([]);\r\n\r\nasync function getAddressList() {\r\n  try {\r\n    const response = await axios.post('/api/addresses/getAllAddresses', {\r\n      userId: UserInfoForm.value.id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data) {\r\n      addressList.value = response.data.map(address => ({\r\n        id: address.id,\r\n        receiver: address.consignee,\r\n        phone: address.phone,\r\n        region: address.area,\r\n        address: address.detailed_address,\r\n        postalCode: '000000',\r\n        isDefault: address.status === 'default'\r\n      }));\r\n    } else {\r\n      ElMessage.error('获取地址列表失败');\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('获取地址列表失败');\r\n  }\r\n}\r\n\r\nconst showUpdateAddressDialog = ref(false);\r\nconst selectedAddress = ref([]);\r\nconst detailedAddress = ref('');\r\nconst consignee = ref('');\r\nconst phoneNumber = ref('');\r\nconst setAsDefault = ref(false);\r\nconst updateid = ref('');\r\n\r\nconst detailedAddressError = ref(false);\r\nconst consigneeError = ref(false);\r\nconst phoneNumberError = ref(false);\r\n\r\nconst addressOptions = ref([]);\r\n\r\nasync function getAddressOptions(region) {\r\n  const lastAddress = ref();\r\n  let isCity = false;\r\n  try {\r\n    const response = await axios.post('/api/addresses/addressToId', {\r\n      address: region\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data) {\r\n      try {\r\n        lastAddress.value = response.data.options[0].children[0].children[0].children[0];\r\n      } catch (e) {\r\n        lastAddress.value = response.data.options[0].children[0].children[0];\r\n        isCity = true;\r\n      }\r\n      if (!isCity)\r\n        selectedAddress.value = [response.data.options[0].value, response.data.options[0].children[0].value, response.data.options[0].children[0].children[0].value, lastAddress.value.value];\r\n      else\r\n        selectedAddress.value = [response.data.options[0].value, response.data.options[0].children[0].value, lastAddress.value.value];\r\n    } else {\r\n      ElMessage.error('获取地址失败');\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nfunction updateAddressBaseInfo(row) {\r\n  selectedAddress.value = row.region;\r\n  detailedAddress.value = row.address;\r\n  consignee.value = row.receiver;\r\n  phoneNumber.value = row.phone;\r\n  setAsDefault.value = row.isDefault;\r\n  getAddressOptions(row.region);\r\n  updateid.value = row.id;\r\n  showUpdateAddressDialog.value = true;\r\n}\r\n\r\nconst loadAddressOptions = () => {\r\n  addressOptions.value = provincesData.map(province => ({\r\n    value: province.id,\r\n    label: province.name,\r\n    children: (citiesData[province.id] || []).map(city => ({\r\n      value: city.id,\r\n      label: city.name,\r\n      children: (areasData[city.id] || []).map(area => ({\r\n        value: area.id,\r\n        label: area.name,\r\n        children: (streetsData[area.id] || []).map(street => ({\r\n          value: street.id,\r\n          label: street.name,\r\n        }))\r\n      }))\r\n    }))\r\n  }));\r\n};\r\n\r\nasync function saveAddress() {\r\n  detailedAddressError.value = !detailedAddress.value;\r\n  consigneeError.value = !consignee.value;\r\n  phoneNumberError.value = !phoneNumber.value;\r\n\r\n  if (detailedAddressError.value || consigneeError.value || phoneNumberError.value || !selectedAddress.value.length) {\r\n    return;\r\n  }\r\n  try {\r\n    const response = await axios.post('/api/addresses/updateAddress', {\r\n      userId: UserInfoForm.value.id,\r\n      addressId: updateid.value,\r\n      consignee: consignee.value,\r\n      phone: phoneNumber.value,\r\n      area: selectedAddress.value.join(' '),\r\n      detailed_address: detailedAddress.value,\r\n      is_default: setAsDefault.value,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      withCredentials: true,\r\n    })\r\n    if (response.status === 200) {\r\n      ElMessage.success(\"添加地址成功\");\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 500);\r\n    } else {\r\n      ElMessage.error(\"添加地址失败\");\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error(\"添加地址失败\");\r\n  } finally {\r\n    showUpdateAddressDialog.value = false;\r\n  }\r\n}\r\n\r\nfunction clearForm_update() {\r\n  selectedAddress.value = [];\r\n  detailedAddress.value = '';\r\n  consignee.value = '';\r\n  phoneNumber.value = '';\r\n  setAsDefault.value = false;\r\n  detailedAddressError.value = false;\r\n  consigneeError.value = false;\r\n  phoneNumberError.value = false;\r\n  updateid.value = \"\";\r\n  showUpdateAddressDialog.value = false;\r\n}\r\n\r\nasync function deleteAddress(row) {\r\n  try {\r\n    const response = await axios.post('/api/addresses/deleteAddress', {\r\n      addressId: row.id,\r\n      userId: UserInfoForm.value.id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      ElMessage.success('删除地址成功');\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 500);\r\n    } else {\r\n      ElMessage.error('删除地址失败');\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('删除地址失败');\r\n  }\r\n}\r\n\r\nasync function setDefault(row) {\r\n  try {\r\n    const response = await axios.post('/api/addresses/updateDefault', {\r\n          userId: UserInfoForm.value.id,\r\n          addressId: row.id,\r\n        }, {\r\n          headers: {\r\n            'Content-Type': 'application/json;charset=UTF-8'\r\n          },\r\n          withCredentials: true\r\n        }\r\n    );\r\n    if (response.data.code === 200) {\r\n      ElMessage.success('设置默认地址成功');\r\n      addressList.value.forEach(address => address.isDefault = false);\r\n      row.isDefault = true;\r\n    } else {\r\n      ElMessage.error('设置默认地址失败');\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('设置默认地址失败');\r\n  }\r\n}\r\n\r\nfunction handleAccountInfo() {\r\n  setTimeout(() => {\r\n    router.push('/profile/account_information');\r\n  }, 500);\r\n}\r\n\r\nfunction handlePersonalSetting() {\r\n  setTimeout(() => {\r\n    router.push('/profile/account_profile');\r\n  }, 500);\r\n}\r\n\r\nfunction handleForgetPassword() {\r\n  setTimeout(() => {\r\n    router.replace('/forgotPassword');\r\n  }, 500);\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession()\r\n  await getAddressList();\r\n  loadAddressOptions();\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.account-management-page {\r\n  font-family: Arial, sans-serif;\r\n  display: flex;\r\n  padding: 20px;\r\n}\r\n\r\n.sidebar {\r\n  margin-top: 90px;\r\n  background-color: #ffffff;\r\n  padding: 20px;\r\n  border-right: 1px solid #eaeaea;\r\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\r\n  height: 70%;\r\n}\r\n\r\n.nav {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.nav-item {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.nav-link {\r\n  font-weight: bold;\r\n  color: #e02020;\r\n  text-decoration: none;\r\n}\r\n\r\n.nav-link.active {\r\n  background-color: #e02020;\r\n  color: white !important;\r\n}\r\n\r\n.sub-nav {\r\n  list-style: none;\r\n  padding-left: 20px;\r\n}\r\n\r\n.sub-nav li {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.main-content {\r\n  margin-top: 90px;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.binding-table {\r\n  margin-top: 20px;\r\n}\r\n\r\n.address-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.form-label {\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n  color: #333;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 20px;\r\n}\r\n\r\n.error-message {\r\n  color: #e02020;\r\n  font-size: 13px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.cancel-button {\r\n  color: #e02020;\r\n  font-weight: bold;\r\n}\r\n\r\n.confirm-button {\r\n  background-color: #e02020;\r\n  border-color: #e02020;\r\n  font-weight: bold;\r\n}\r\n\r\n.el-button[type=\"primary\"] {\r\n  background-color: #e02020;\r\n  border-color: #e02020;\r\n}\r\n\r\n.night-mode {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .account-management-page {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .row {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .body {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .header {\r\n  background-color: #3c3c3c;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .sidebar {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n  border-right: 1px solid #444;\r\n}\r\n\r\n.night-mode .sidebar .el-menu-item {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .sidebar.el-menu-item:hover {\r\n  background-color: #4c4c4c;\r\n}\r\n\r\n.night-mode .main-content,\r\n.night-mode .profile-section,\r\n.night-mode .order-section,\r\n.night-mode .logistics-section,\r\n.night-mode .logistics-item,\r\n.night-mode .profile-card,\r\n.night-mode .promotion-card {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .order-icon,\r\n.night-mode .logistics-action {\r\n  color: #ffa500;\r\n}\r\n\r\n.night-mode .right-widget {\r\n  background-color: #3c3c3c;\r\n  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .footer {\r\n  background-color: #2e2e2e;\r\n  border-top: 1px solid #333;\r\n}\r\n\r\n.night-mode .footer-links a {\r\n  color: #ffffff;\r\n}\r\n\r\n.night-mode .footer-links a:hover {\r\n  color: #e02020;\r\n}\r\n</style>"],"mappings":";AA0JA,SAAQA,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB,MAAM,sCAAsC;AACtE,SAAQC,QAAQ,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,IAAI,QAAO,yBAAyB;AACzE,OAAOC,eAAe,MAAM,kCAAkC;AAC9D,OAAOC,eAAe,MAAM,kCAAkC;AAC9D,OAAOC,oBAAoB,MAAM,uCAAuC;AACxE,OAAOC,oBAAoB,MAAM,uCAAuC;AACxE,SAAQC,SAAS,QAAO,cAAc;AACtC,OAAOC,aAAa,MAAM,wBAAwB;AAClD,OAAOC,UAAU,MAAM,oBAAoB;AAC3C,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,OAAO,MAAM,uBAAuB;;;;;;;IAE3C,MAAM;MAACC,YAAY;MAAEC;IAAe,CAAC,GAAGF,OAAO,CAAC,CAAC;IAEjD,MAAMG,WAAW,GAAGpB,GAAG,CAAC,EAAE,CAAC;IAE3B,eAAeqB,cAAcA,CAAA,EAAG;MAC9B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,gCAAgC,EAAE;UAClEC,MAAM,EAAEN,YAAY,CAACO,KAAK,CAACC;QAC7B,CAAC,EAAE;UACDC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,eAAe,EAAE;QACnB,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,IAAI,EAAE;UACjBT,WAAW,CAACK,KAAK,GAAGH,QAAQ,CAACO,IAAI,CAACC,GAAG,CAACC,OAAO,KAAK;YAChDL,EAAE,EAAEK,OAAO,CAACL,EAAE;YACdM,QAAQ,EAAED,OAAO,CAACE,SAAS;YAC3BC,KAAK,EAAEH,OAAO,CAACG,KAAK;YACpBC,MAAM,EAAEJ,OAAO,CAACK,IAAI;YACpBL,OAAO,EAAEA,OAAO,CAACM,gBAAgB;YACjCC,UAAU,EAAE,QAAQ;YACpBC,SAAS,EAAER,OAAO,CAACS,MAAM,KAAK;UAChC,CAAC,CAAC,CAAC;QACL,CAAC,MAAM;UACL5B,SAAS,CAAC6B,KAAK,CAAC,UAAU,CAAC;QAC7B;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ9B,SAAS,CAAC6B,KAAK,CAAC,UAAU,CAAC;MAC7B;IACF;IAEA,MAAME,uBAAuB,GAAG3C,GAAG,CAAC,KAAK,CAAC;IAC1C,MAAM4C,eAAe,GAAG5C,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAM6C,eAAe,GAAG7C,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMiC,SAAS,GAAGjC,GAAG,CAAC,EAAE,CAAC;IACzB,MAAM8C,WAAW,GAAG9C,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAM+C,YAAY,GAAG/C,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAMgD,QAAQ,GAAGhD,GAAG,CAAC,EAAE,CAAC;IAExB,MAAMiD,oBAAoB,GAAGjD,GAAG,CAAC,KAAK,CAAC;IACvC,MAAMkD,cAAc,GAAGlD,GAAG,CAAC,KAAK,CAAC;IACjC,MAAMmD,gBAAgB,GAAGnD,GAAG,CAAC,KAAK,CAAC;IAEnC,MAAMoD,cAAc,GAAGpD,GAAG,CAAC,EAAE,CAAC;IAE9B,eAAeqD,iBAAiBA,CAAClB,MAAM,EAAE;MACvC,MAAMmB,WAAW,GAAGtD,GAAG,CAAC,CAAC;MACzB,IAAIuD,MAAM,GAAG,KAAK;MAClB,IAAI;QACF,MAAMjC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,4BAA4B,EAAE;UAC9DQ,OAAO,EAAEI;QACX,CAAC,EAAE;UACDR,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,eAAe,EAAE;QACnB,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,IAAI,EAAE;UACjB,IAAI;YACFyB,WAAW,CAAC7B,KAAK,GAAGH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;UAClF,CAAC,CAAC,OAAOC,CAAC,EAAE;YACVJ,WAAW,CAAC7B,KAAK,GAAGH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;YACpEF,MAAM,GAAG,IAAI;UACf;UACA,IAAI,CAACA,MAAM,EACTX,eAAe,CAACnB,KAAK,GAAG,CAACH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAAC/B,KAAK,EAAEH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAChC,KAAK,EAAEH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAAChC,KAAK,EAAE6B,WAAW,CAAC7B,KAAK,CAACA,KAAK,CAAC,CAAC,KAEtLmB,eAAe,CAACnB,KAAK,GAAG,CAACH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAAC/B,KAAK,EAAEH,QAAQ,CAACO,IAAI,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAChC,KAAK,EAAE6B,WAAW,CAAC7B,KAAK,CAACA,KAAK,CAAC;QACjI,CAAC,MAAM;UACLb,SAAS,CAAC6B,KAAK,CAAC,QAAQ,CAAC;QAC3B;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZiB,OAAO,CAACC,GAAG,CAAClB,GAAG,CAAC;MAClB;IACF;IAEA,SAASmB,qBAAqBA,CAACC,GAAG,EAAE;MAClClB,eAAe,CAACnB,KAAK,GAAGqC,GAAG,CAAC3B,MAAM;MAClCU,eAAe,CAACpB,KAAK,GAAGqC,GAAG,CAAC/B,OAAO;MACnCE,SAAS,CAACR,KAAK,GAAGqC,GAAG,CAAC9B,QAAQ;MAC9Bc,WAAW,CAACrB,KAAK,GAAGqC,GAAG,CAAC5B,KAAK;MAC7Ba,YAAY,CAACtB,KAAK,GAAGqC,GAAG,CAACvB,SAAS;MAClCc,iBAAiB,CAACS,GAAG,CAAC3B,MAAM,CAAC;MAC7Ba,QAAQ,CAACvB,KAAK,GAAGqC,GAAG,CAACpC,EAAE;MACvBiB,uBAAuB,CAAClB,KAAK,GAAG,IAAI;IACtC;IAEA,MAAMsC,kBAAkB,GAAGA,CAAA,KAAM;MAC/BX,cAAc,CAAC3B,KAAK,GAAGZ,aAAa,CAACiB,GAAG,CAACkC,QAAQ,KAAK;QACpDvC,KAAK,EAAEuC,QAAQ,CAACtC,EAAE;QAClBuC,KAAK,EAAED,QAAQ,CAACE,IAAI;QACpBT,QAAQ,EAAE,CAAC3C,UAAU,CAACkD,QAAQ,CAACtC,EAAE,CAAC,IAAI,EAAE,EAAEI,GAAG,CAACqC,IAAI,KAAK;UACrD1C,KAAK,EAAE0C,IAAI,CAACzC,EAAE;UACduC,KAAK,EAAEE,IAAI,CAACD,IAAI;UAChBT,QAAQ,EAAE,CAAC1C,SAAS,CAACoD,IAAI,CAACzC,EAAE,CAAC,IAAI,EAAE,EAAEI,GAAG,CAACM,IAAI,KAAK;YAChDX,KAAK,EAAEW,IAAI,CAACV,EAAE;YACduC,KAAK,EAAE7B,IAAI,CAAC8B,IAAI;YAChBT,QAAQ,EAAE,CAACzC,WAAW,CAACoB,IAAI,CAACV,EAAE,CAAC,IAAI,EAAE,EAAEI,GAAG,CAACsC,MAAM,KAAK;cACpD3C,KAAK,EAAE2C,MAAM,CAAC1C,EAAE;cAChBuC,KAAK,EAAEG,MAAM,CAACF;YAChB,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAeG,WAAWA,CAAA,EAAG;MAC3BpB,oBAAoB,CAACxB,KAAK,GAAG,CAACoB,eAAe,CAACpB,KAAK;MACnDyB,cAAc,CAACzB,KAAK,GAAG,CAACQ,SAAS,CAACR,KAAK;MACvC0B,gBAAgB,CAAC1B,KAAK,GAAG,CAACqB,WAAW,CAACrB,KAAK;MAE3C,IAAIwB,oBAAoB,CAACxB,KAAK,IAAIyB,cAAc,CAACzB,KAAK,IAAI0B,gBAAgB,CAAC1B,KAAK,IAAI,CAACmB,eAAe,CAACnB,KAAK,CAAC6C,MAAM,EAAE;QACjH;MACF;MACA,IAAI;QACF,MAAMhD,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,8BAA8B,EAAE;UAChEC,MAAM,EAAEN,YAAY,CAACO,KAAK,CAACC,EAAE;UAC7B6C,SAAS,EAAEvB,QAAQ,CAACvB,KAAK;UACzBQ,SAAS,EAAEA,SAAS,CAACR,KAAK;UAC1BS,KAAK,EAAEY,WAAW,CAACrB,KAAK;UACxBW,IAAI,EAAEQ,eAAe,CAACnB,KAAK,CAAC+C,IAAI,CAAC,GAAG,CAAC;UACrCnC,gBAAgB,EAAEQ,eAAe,CAACpB,KAAK;UACvCgD,UAAU,EAAE1B,YAAY,CAACtB;QAC3B,CAAC,EAAE;UACDE,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,eAAe,EAAE;QACnB,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACkB,MAAM,KAAK,GAAG,EAAE;UAC3B5B,SAAS,CAAC8D,OAAO,CAAC,QAAQ,CAAC;UAC3BC,UAAU,CAAC,MAAM;YACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;UAC1B,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,MAAM;UACLlE,SAAS,CAAC6B,KAAK,CAAC,QAAQ,CAAC;QAC3B;MACF,CAAC,CAAC,OAAOiB,CAAC,EAAE;QACV9C,SAAS,CAAC6B,KAAK,CAAC,QAAQ,CAAC;MAC3B,CAAC,SAAS;QACRE,uBAAuB,CAAClB,KAAK,GAAG,KAAK;MACvC;IACF;IAEA,SAASsD,gBAAgBA,CAAA,EAAG;MAC1BnC,eAAe,CAACnB,KAAK,GAAG,EAAE;MAC1BoB,eAAe,CAACpB,KAAK,GAAG,EAAE;MAC1BQ,SAAS,CAACR,KAAK,GAAG,EAAE;MACpBqB,WAAW,CAACrB,KAAK,GAAG,EAAE;MACtBsB,YAAY,CAACtB,KAAK,GAAG,KAAK;MAC1BwB,oBAAoB,CAACxB,KAAK,GAAG,KAAK;MAClCyB,cAAc,CAACzB,KAAK,GAAG,KAAK;MAC5B0B,gBAAgB,CAAC1B,KAAK,GAAG,KAAK;MAC9BuB,QAAQ,CAACvB,KAAK,GAAG,EAAE;MACnBkB,uBAAuB,CAAClB,KAAK,GAAG,KAAK;IACvC;IAEA,eAAeuD,aAAaA,CAAClB,GAAG,EAAE;MAChC,IAAI;QACF,MAAMxC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,8BAA8B,EAAE;UAChEgD,SAAS,EAAET,GAAG,CAACpC,EAAE;UACjBF,MAAM,EAAEN,YAAY,CAACO,KAAK,CAACC;QAC7B,CAAC,EAAE;UACDC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,eAAe,EAAE;QACnB,CAAC,CAAC;QACF,IAAIN,QAAQ,CAACO,IAAI,CAACoD,IAAI,KAAK,GAAG,EAAE;UAC9BrE,SAAS,CAAC8D,OAAO,CAAC,QAAQ,CAAC;UAC3BC,UAAU,CAAC,MAAM;YACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;UAC1B,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,MAAM;UACLlE,SAAS,CAAC6B,KAAK,CAAC,QAAQ,CAAC;QAC3B;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ9B,SAAS,CAAC6B,KAAK,CAAC,QAAQ,CAAC;MAC3B;IACF;IAEA,eAAeyC,UAAUA,CAACpB,GAAG,EAAE;MAC7B,IAAI;QACF,MAAMxC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,8BAA8B,EAAE;UAC5DC,MAAM,EAAEN,YAAY,CAACO,KAAK,CAACC,EAAE;UAC7B6C,SAAS,EAAET,GAAG,CAACpC;QACjB,CAAC,EAAE;UACDC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,eAAe,EAAE;QACnB,CACJ,CAAC;QACD,IAAIN,QAAQ,CAACO,IAAI,CAACoD,IAAI,KAAK,GAAG,EAAE;UAC9BrE,SAAS,CAAC8D,OAAO,CAAC,UAAU,CAAC;UAC7BtD,WAAW,CAACK,KAAK,CAAC0D,OAAO,CAACpD,OAAO,IAAIA,OAAO,CAACQ,SAAS,GAAG,KAAK,CAAC;UAC/DuB,GAAG,CAACvB,SAAS,GAAG,IAAI;QACtB,CAAC,MAAM;UACL3B,SAAS,CAAC6B,KAAK,CAAC,UAAU,CAAC;QAC7B;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ9B,SAAS,CAAC6B,KAAK,CAAC,UAAU,CAAC;MAC7B;IACF;IAEA,SAAS2C,iBAAiBA,CAAA,EAAG;MAC3BT,UAAU,CAAC,MAAM;QACf1E,MAAM,CAACoF,IAAI,CAAC,8BAA8B,CAAC;MAC7C,CAAC,EAAE,GAAG,CAAC;IACT;IAEA,SAASC,qBAAqBA,CAAA,EAAG;MAC/BX,UAAU,CAAC,MAAM;QACf1E,MAAM,CAACoF,IAAI,CAAC,0BAA0B,CAAC;MACzC,CAAC,EAAE,GAAG,CAAC;IACT;IAEA,SAASE,oBAAoBA,CAAA,EAAG;MAC9BZ,UAAU,CAAC,MAAM;QACf1E,MAAM,CAACuF,OAAO,CAAC,iBAAiB,CAAC;MACnC,CAAC,EAAE,GAAG,CAAC;IACT;IAEAzF,SAAS,CAAC,YAAY;MACpBoB,eAAe,CAAC,CAAC;MACjB,MAAME,cAAc,CAAC,CAAC;MACtB0C,kBAAkB,CAAC,CAAC;IACtB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}