{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-content row\",\n  style: {\n    \"min-height\": \"90vh\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"col-9\"\n};\nconst _hoisted_3 = {\n  class: \"address-container\"\n};\nconst _hoisted_4 = {\n  class: \"header-container row\"\n};\nconst _hoisted_5 = {\n  style: {\n    \"text-align\": \"right\"\n  },\n  class: \"col-10\"\n};\nconst _hoisted_6 = {\n  class: \"address-list\"\n};\nconst _hoisted_7 = {\n  class: \"row\"\n};\nconst _hoisted_8 = {\n  class: \"icon col-2\"\n};\nconst _hoisted_9 = {\n  class: \"col-10 details\"\n};\nconst _hoisted_10 = {\n  class: \"address\"\n};\nconst _hoisted_11 = {\n  class: \"place\"\n};\nconst _hoisted_12 = {\n  class: \"contact\"\n};\nconst _hoisted_13 = {\n  class: \"order-container\"\n};\nconst _hoisted_14 = {\n  class: \"order-content\"\n};\nconst _hoisted_15 = {\n  class: \"shop-name\"\n};\nconst _hoisted_16 = {\n  class: \"product-details\"\n};\nconst _hoisted_17 = [\"src\"];\nconst _hoisted_18 = {\n  class: \"product-description\"\n};\nconst _hoisted_19 = {\n  class: \"sku-info\"\n};\nconst _hoisted_20 = {\n  class: \"price\"\n};\nconst _hoisted_21 = {\n  class: \"quantity\"\n};\nconst _hoisted_22 = {\n  class: \"subtotal\"\n};\nconst _hoisted_23 = {\n  class: \"order-footer\"\n};\nconst _hoisted_24 = {\n  class: \"remark\"\n};\nconst _hoisted_25 = {\n  class: \"total-price\"\n};\nconst _hoisted_26 = {\n  class: \"total-amount\"\n};\nconst _hoisted_27 = {\n  class: \"col-3\"\n};\nconst _hoisted_28 = {\n  class: \"container cart-checkout\"\n};\nconst _hoisted_29 = {\n  class: \"title\",\n  style: {\n    \"margin-bottom\": \"40px\"\n  }\n};\nconst _hoisted_30 = {\n  style: {\n    \"font-size\": \"12px\"\n  }\n};\nconst _hoisted_31 = {\n  style: {\n    \"color\": \"#4c4c4c\",\n    \"font-weight\": \"bold\",\n    \"font-size\": \"20px\"\n  }\n};\nconst _hoisted_32 = {\n  class: \"message\"\n};\nconst _hoisted_33 = {\n  style: {\n    \"text-align\": \"end\"\n  }\n};\nconst _hoisted_34 = {\n  class: \"price\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"HeaderComponent\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"col-2\"\n  }, [_createElementVNode(\"a\", {\n    style: {\n      \"font-size\": \"18px\",\n      \"font-weight\": \"bold\",\n      \"text-align\": \"left\"\n    }\n  }, \"确认收货地址\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createVNode($setup[\"AddAddressComponent\"]), _createVNode(_component_el_button, {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.router.push('/profile/address')),\n    class: \"link-text\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"管理地址 \")])),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.addresses, (address, index) => {\n    return _openBlock(), _createBlock(_component_el_card, {\n      key: index,\n      class: _normalizeClass([\"address-card\", {\n        selected: address.isSelected\n      }]),\n      onClick: $event => $setup.selectAddress(address)\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Location\"], {\n          class: _normalizeClass({\n            selected: address.isSelected\n          })\n        }, null, 8 /* PROPS */, [\"class\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [address.isDefault ? (_openBlock(), _createBlock(_component_el_tag, {\n        key: 0,\n        style: {\n          \"background-color\": \"rgba(240, 63, 46, 0.5)\",\n          \"color\": \"#ff5000\",\n          \"font-weight\": \"bold\"\n        }\n      }, {\n        default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\" 默认 \")]))]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString(address.region.substring(0, 10)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, _toDisplayString(address.address), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_12, _toDisplayString(address.receiver) + \" \" + _toDisplayString(address.phone), 1 /* TEXT */)])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"class\", \"onClick\"]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_cache[7] || (_cache[7] = _createStaticVNode(\"<div class=\\\"order-header\\\" data-v-b49531e6><span class=\\\"store-name\\\" data-v-b49531e6>店铺宝贝</span><span class=\\\"product-info\\\" data-v-b49531e6>商品属性</span><span class=\\\"price-info\\\" data-v-b49531e6>原价</span><span class=\\\"quantity-info\\\" data-v-b49531e6>数量</span><span class=\\\"subtotal-info\\\" data-v-b49531e6>小计</span></div>\", 1)), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.orderItems, (shop, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: shop.shopId,\n      class: \"shop-item\"\n    }, [_createElementVNode(\"div\", _hoisted_15, _toDisplayString(shop.shopName), 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(shop.goods, item => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: item.specId,\n        class: \"order-item\"\n      }, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"img\", {\n        src: item.specImage,\n        alt: \"商品图片\",\n        class: \"product-image\"\n      }, null, 8 /* PROPS */, _hoisted_17), _createElementVNode(\"div\", _hoisted_18, [_createTextVNode(_toDisplayString(item.goodName) + \" \", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_19, \"规格: \" + _toDisplayString(item.specName), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_20, \"¥\" + _toDisplayString(item.specPrice), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_21, [_createVNode(_component_el_input_number, {\n        modelValue: item.specNumber,\n        \"onUpdate:modelValue\": $event => item.specNumber = $event,\n        min: 1,\n        max: 10,\n        onChange: $event => $setup.changeQuantity(item)\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]), _createElementVNode(\"div\", _hoisted_22, \"¥\" + _toDisplayString(item.specPrice * item.specNumber), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"订单备注\", -1 /* HOISTED */)), _createVNode(_component_el_input, {\n      type: \"textarea\",\n      placeholder: \"请填写，传达给商家可见，建议和商家协商一致\",\n      modelValue: shop.remark,\n      \"onUpdate:modelValue\": $event => shop.remark = $event,\n      maxlength: \"200\",\n      resize: \"none\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n      class: \"delivery-service\"\n    }, [_createElementVNode(\"span\", null, \"配送服务 快递 包邮\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_25, [_cache[5] || (_cache[5] = _createTextVNode(\" 合计(含运费) \")), _createElementVNode(\"span\", _hoisted_26, \"¥\" + _toDisplayString($setup.orderTotalPrice(shop.goods)), 1 /* TEXT */)])]), index < $setup.orderItems.length - 1 ? (_openBlock(), _createBlock(_component_el_divider, {\n      key: 0,\n      style: {\n        \"border-width\": \"2px\"\n      }\n    })) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]), _createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"div\", _hoisted_29, [_cache[10] || (_cache[10] = _createTextVNode(\"付款详细  \")), _createElementVNode(\"span\", _hoisted_30, [_cache[8] || (_cache[8] = _createTextVNode(\"共\")), _createElementVNode(\"a\", _hoisted_31, _toDisplayString(), 1 /* TEXT */), _cache[9] || (_cache[9] = _createTextVNode(\"件商品\"))])]), _createElementVNode(\"div\", _hoisted_32, [_cache[11] || (_cache[11] = _createElementVNode(\"a\", {\n    style: {\n      \"text-align\": \"start\"\n    }\n  }, \"商品总价：\", -1 /* HOISTED */)), _createElementVNode(\"a\", _hoisted_33, \"¥ \" + _toDisplayString($setup.orderTotalPriceAll()), 1 /* TEXT */)]), _createElementVNode(\"div\", {\n    class: \"cut-price\"\n  }, [_cache[12] || (_cache[12] = _createElementVNode(\"a\", {\n    style: {\n      \"text-align\": \"start\"\n    }\n  }, \"共减免：\", -1 /* HOISTED */)), _createElementVNode(\"a\", {\n    style: {\n      \"text-align\": \"end\"\n    }\n  }, \"¥ \" + _toDisplayString($setup.orderCutPrice))]), _cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n    class: \"total\"\n  }, \"合计：\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_34, \"¥ \" + _toDisplayString($setup.orderTotalPriceAll() - $setup.orderCutPrice), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"button\",\n    onClick: $setup.submitOrder\n  }, \"提交订单\")])])]), _createVNode($setup[\"FooterComponent\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_Fragment","_createVNode","$setup","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_el_button","onClick","_cache","$event","router","push","default","_withCtx","_createTextVNode","_","_hoisted_6","_renderList","addresses","address","index","_createBlock","_component_el_card","key","_normalizeClass","selected","isSelected","selectAddress","_hoisted_7","_hoisted_8","_component_el_icon","_hoisted_9","_hoisted_10","isDefault","_component_el_tag","_createCommentVNode","_toDisplayString","region","substring","_hoisted_11","_hoisted_12","receiver","phone","_hoisted_13","_hoisted_14","_createStaticVNode","orderItems","shop","shopId","_hoisted_15","shopName","goods","item","specId","_hoisted_16","src","specImage","alt","_hoisted_17","_hoisted_18","goodName","_hoisted_19","specName","_hoisted_20","specPrice","_hoisted_21","_component_el_input_number","modelValue","specNumber","min","max","onChange","changeQuantity","_hoisted_22","_hoisted_23","_hoisted_24","_component_el_input","type","placeholder","remark","maxlength","resize","_hoisted_25","_hoisted_26","orderTotalPrice","length","_component_el_divider","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","orderTotalPriceAll","orderCutPrice","_hoisted_34","submitOrder"],"sources":["D:\\Cache\\Java\\shopping\\shoppping_c_frontend\\src\\views\\PayGoodsView.vue"],"sourcesContent":["<template>\r\n  <HeaderComponent/>\r\n  <div class=\"main-content row\" style=\"min-height: 90vh;\">\r\n    <div class=\"col-9\">\r\n      <div class=\"address-container\">\r\n        <div class=\"header-container row\">\r\n          <div class=\"col-2\">\r\n            <a style=\"font-size: 18px; font-weight: bold; text-align: left;\">确认收货地址</a>\r\n          </div>\r\n          <div style=\"text-align: right;\" class=\"col-10\">\r\n            <AddAddressComponent></AddAddressComponent>\r\n            <el-button @click=\"router.push('/profile/address')\"\r\n                       class=\"link-text\">管理地址\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"address-list\">\r\n          <el-card v-for=\"(address, index) in addresses\"\r\n                   :key=\"index\"\r\n                   class=\"address-card\"\r\n                   :class=\"{selected: address.isSelected}\"\r\n                   @click=\"selectAddress(address)\">\r\n            <div class=\"row\">\r\n              <div class=\"icon col-2\">\r\n                <el-icon>\r\n                  <Location :class=\"{selected: address.isSelected}\"></Location>\r\n                </el-icon>\r\n              </div>\r\n              <div class=\"col-10 details\">\r\n                <div class=\"address\">\r\n                  <el-tag v-if=\"address.isDefault\"\r\n                          style=\"background-color: rgba(240, 63, 46, 0.5); color: #ff5000; font-weight: bold;\">\r\n                    默认\r\n                  </el-tag>\r\n                  {{ address.region.substring(0, 10) }}\r\n                </div>\r\n                <div class=\"place\">{{ address.address }}</div>\r\n                <div class=\"contact\">{{ address.receiver }} {{ address.phone }}</div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </div>\r\n      <div class=\"order-container\">\r\n        <div class=\"order-content\">\r\n          <div class=\"order-header\">\r\n            <span class=\"store-name\">店铺宝贝</span>\r\n            <span class=\"product-info\">商品属性</span>\r\n            <span class=\"price-info\">原价</span>\r\n            <span class=\"quantity-info\">数量</span>\r\n            <span class=\"subtotal-info\">小计</span>\r\n          </div>\r\n          <div>\r\n            <div v-for=\"(shop,index) in orderItems\" :key=\"shop.shopId\" class=\"shop-item\">\r\n              <div class=\"shop-name\">{{ shop.shopName }}</div>\r\n              <div v-for=\"item in shop.goods\" :key=\"item.specId\" class=\"order-item\">\r\n                <div class=\"product-details\">\r\n                  <img :src=\"item.specImage\" alt=\"商品图片\" class=\"product-image\"/>\r\n                  <div class=\"product-description\">\r\n                    {{ item.goodName }}\r\n                    <div class=\"sku-info\">规格: {{ item.specName }}</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"price\">¥{{ item.specPrice }}</div>\r\n                <div class=\"quantity\">\r\n                  <el-input-number v-model=\"item.specNumber\" :min=\"1\" :max=\"10\"\r\n                                   @change=\"changeQuantity(item)\"></el-input-number>\r\n                </div>\r\n                <div class=\"subtotal\">¥{{ item.specPrice * item.specNumber }}</div>\r\n              </div>\r\n              <div class=\"order-footer\">\r\n                <div class=\"remark\">\r\n                  <span>订单备注</span>\r\n                  <el-input type=\"textarea\" placeholder=\"请填写，传达给商家可见，建议和商家协商一致\" v-model=\"shop.remark\"\r\n                            maxlength=\"200\" resize=\"none\"></el-input>\r\n                </div>\r\n                <div class=\"delivery-service\">\r\n                  <span>配送服务 快递 包邮</span>\r\n                </div>\r\n                <div class=\"total-price\">\r\n                  合计(含运费) <span class=\"total-amount\">¥{{ orderTotalPrice(shop.goods) }}</span>\r\n                </div>\r\n              </div>\r\n              <el-divider style=\"border-width: 2px; \" v-if=\"index < orderItems.length - 1\"></el-divider>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-3\">\r\n      <div class=\"container cart-checkout\">\r\n        <div class=\"title\" style=\"margin-bottom: 40px;\">付款详细&nbsp;&nbsp;<span style=\"font-size: 12px;\">共<a\r\n            style=\"color: #4c4c4c; font-weight: bold; font-size: 20px\">{{  }}</a>件商品</span></div>\r\n        <div class=\"message\">\r\n          <a style=\"text-align: start\">商品总价：</a>\r\n          <a style=\"text-align: end\">¥ {{ orderTotalPriceAll() }}</a>\r\n        </div>\r\n        <div class=\"cut-price\">\r\n          <a style=\"text-align: start\">共减免：</a>\r\n          <a style=\"text-align: end\">¥ {{ orderCutPrice }}</a>\r\n        </div>\r\n        <div class=\"total\">合计：</div>\r\n        <div class=\"price\">¥ {{ orderTotalPriceAll() - orderCutPrice }}</div>\r\n        <button class=\"button\" @click=\"submitOrder\">提交订单</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <FooterComponent/>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref} from \"vue\";\r\nimport router from \"@/router\";\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport AddAddressComponent from \"@/components/AddAddressComponent.vue\";\r\nimport {Location} from \"@element-plus/icons-vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport axios from \"axios\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport useUser from \"@/composables/useUser\";\r\n\r\nconst {UserInfoForm, initUserSession} = useUser()\r\n\r\nconst Token = ref();\r\nconst addresses = ref([]);\r\nconst orderItems = ref([]);\r\nconst orderCutPrice = 0;\r\n\r\nasync function initAddresses() {\r\n  try {\r\n    const response = await axios.post('/api/addresses/getAllAddresses', {\r\n      userId: UserInfoForm.value.id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data) {\r\n      addresses.value = response.data.map(address => ({\r\n        id: address.id,\r\n        receiver: address.consignee,\r\n        phone: address.phone,\r\n        region: address.area,\r\n        address: address.detailed_address,\r\n        isDefault: address.status === 'default',\r\n        isSelected: address.isDefault,\r\n      }));\r\n    } else {\r\n      ElMessage.error('获取地址列表失败');\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('获取地址列表失败');\r\n  }\r\n}\r\n\r\nasync function initGoods() {\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  Token.value = urlParams.get('token');\r\n  try {\r\n    const response = await axios.post('/api/pay/getPayGoods', {\r\n      token: Token.value,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data) {\r\n      orderItems.value = response.data;\r\n    } else {\r\n      ElMessage.error('获取商品信息失败');\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('获取商品信息失败');\r\n  }\r\n}\r\n\r\nfunction selectAddress(address) {\r\n  addresses.value.forEach(item => {\r\n    item.isSelected = false;\r\n  });\r\n  address.isSelected = true;\r\n}\r\n\r\nasync function changeQuantity(item) {\r\n  try {\r\n    const response = await axios.post('/api/pay/changGoodNum', {\r\n      token: Token.value,\r\n      specId: item.specId,\r\n      num: item.specNumber,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data.code === 200)\r\n      await initGoods();\r\n    else if (response.data.code === 404)\r\n      ElMessage.error('购物车信息不存在，请重新提交');\r\n    else if (response.data.code === 400)\r\n      ElMessage.error('修改商品数量失败');\r\n  } catch (e) {\r\n    ElMessage.error('修改商品数量失败');\r\n  }\r\n}\r\n\r\nconst orderTotalPrice = (goods = []) => {\r\n  let total = 0;\r\n  goods.forEach(item => {\r\n    total += item.specPrice * item.specNumber;\r\n  });\r\n  return total;\r\n};\r\n\r\nconst orderTotalPriceAll = () => {\r\n  let total = 0;\r\n  orderItems.value.forEach(shop => {\r\n    total += orderTotalPrice(shop.goods);\r\n  });\r\n  return total;\r\n};\r\n\r\nasync function submitOrder() {\r\n  let addressId;\r\n  try {\r\n    addressId = addresses.value.find(address => address.isSelected).id;\r\n  } catch (e) {\r\n    ElMessage.error('请选择收货地址');\r\n    return;\r\n  }\r\n  const data = {\r\n    userId: UserInfoForm.value.id,\r\n    token: Token.value,\r\n    addressId: addressId,\r\n  }\r\n  try {\r\n    const response = await axios.post('/api/pay/submitOrder', data, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data === \"fail\") {\r\n      ElMessage.error('提交订单失败');\r\n    } else {\r\n      await router.replace('/payGoods/submitOrder?token=' + response.data);\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('提交订单失败');\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  await initAddresses();\r\n  await initGoods();\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  margin-top: 90px;\r\n  min-height: calc(80vh - 100px);\r\n}\r\n\r\n.address-container {\r\n  margin: 10px 40px;\r\n  border-radius: 20px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  min-height: 25vh;\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n\r\n  .header-container {\r\n    width: 100%;\r\n    margin-bottom: 20px;\r\n\r\n    .link-text {\r\n      margin-left: 10px;\r\n      margin-bottom: 20px;\r\n      text-decoration: none;\r\n      color: #4c4c4c;\r\n      background-color: transparent;\r\n      border: none;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .link-text:hover {\r\n      color: #e02020;\r\n    }\r\n  }\r\n\r\n  .address-list {\r\n    display: flex;\r\n    gap: 15px;\r\n    overflow-x: auto;\r\n    padding-bottom: 10px;\r\n\r\n    .address-card {\r\n      width: calc(25% - 10px);\r\n      height: 120px;\r\n      padding: 3px;\r\n      border-radius: 10px;\r\n      border: 1px solid #e0e0e0;\r\n      cursor: pointer;\r\n      background-color: #ffffff;\r\n      transition: all 0.3s ease;\r\n\r\n      &.selected {\r\n        border-color: #f03f2e;\r\n        box-shadow: 0 0 10px rgba(240, 63, 46, 0.4);\r\n        background-color: #ffecec;\r\n\r\n        .status {\r\n          color: #ffffff;\r\n          background-color: #f03f2e;\r\n          padding: 4px 8px;\r\n          border-radius: 12px;\r\n          font-size: 12px;\r\n          font-weight: bold;\r\n          margin-top: 10px;\r\n          display: inline-block;\r\n        }\r\n      }\r\n\r\n      .icon {\r\n        font-size: 24px;\r\n        align-self: center;\r\n\r\n        & .selected {\r\n          color: #f03f2e;\r\n        }\r\n      }\r\n\r\n      .details {\r\n        text-align: left;\r\n\r\n        .address, .contact {\r\n          font-size: 14px;\r\n          color: #4c4c4c;\r\n          margin: 2px 0;\r\n        }\r\n\r\n        .place {\r\n          font-weight: bold;\r\n          font-size: 16px;\r\n          color: #333;\r\n          margin: 2px 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.shop-name {\r\n  font-weight: bold;\r\n  text-align: start;\r\n  padding: 10px 20px;\r\n  color: #ff5000;\r\n}\r\n\r\n.order-container {\r\n  margin: 20px 40px;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  background-color: #f9f9f9;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n\r\n  .order-content {\r\n    .order-header {\r\n      display: grid;\r\n      grid-template-columns: 20% 40% 10% 15% 15%;\r\n      padding: 10px;\r\n      font-weight: bold;\r\n      color: #555;\r\n      border-bottom: 1px solid #ddd;\r\n      text-align: center;\r\n    }\r\n\r\n    .order-item {\r\n      width: 100%;\r\n      display: grid;\r\n      grid-template-columns: 60% 10% 15% 15%;\r\n      align-items: center;\r\n      padding: 15px 20px;\r\n      border-bottom: 1px solid #e0e0e0;\r\n      text-align: center;\r\n\r\n      .store-info {\r\n        text-align: center;\r\n      }\r\n\r\n      .product-details {\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .product-image {\r\n          width: 80px;\r\n          height: 80px;\r\n          margin-right: 40px;\r\n          margin-left: 40px;\r\n        }\r\n\r\n        .product-description {\r\n          text-align: left;\r\n          font-size: 14px;\r\n          color: #333;\r\n          margin-left: 40px;\r\n\r\n          .sku-info {\r\n            font-size: 12px;\r\n            color: #999;\r\n            margin-top: 5px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .price {\r\n        color: #f03f2e;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .quantity {\r\n        text-align: center;\r\n      }\r\n\r\n      .subtotal {\r\n        color: #f03f2e;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n\r\n    .order-footer {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 20px 0;\r\n\r\n      .remark {\r\n        width: 60%;\r\n\r\n        el-input {\r\n          width: 100%;\r\n        }\r\n      }\r\n\r\n      .delivery-service, .total-price {\r\n        width: 20%;\r\n        text-align: center;\r\n        align-items: center;\r\n        font-size: 16px;\r\n        color: #555;\r\n      }\r\n\r\n      .total-amount {\r\n        align-items: center;\r\n        font-size: 20px;\r\n        color: #f03f2e;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@container-width: 340px;\r\n@container-height: 270px;\r\n@border-radius: 10px;\r\n@font-family: Arial, sans-serif;\r\n\r\n.container {\r\n  width: @container-width;\r\n  height: @container-height;\r\n  border: 1px solid #eee;\r\n  border-radius: @border-radius;\r\n  position: fixed;\r\n  margin: 20px auto;\r\n  text-align: center;\r\n  font-family: @font-family;\r\n  overflow: visible;\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 15px;\r\n    font-weight: bold;\r\n    margin-bottom: 10px;\r\n    color: #e02020;\r\n  }\r\n\r\n  .image {\r\n    position: absolute;\r\n    top: 60px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    opacity: 0.5;\r\n  }\r\n\r\n  .message {\r\n    position: absolute;\r\n    top: 70px;\r\n    left: 30%;\r\n    transform: translateX(-50%);\r\n    color: #e02020;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .cut-price {\r\n    position: absolute;\r\n    top: 100px;\r\n    left: 27%;\r\n    transform: translateX(-50%);\r\n    color: #e02020;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .total {\r\n    position: absolute;\r\n    bottom: 80px;\r\n    left: 30px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .price {\r\n    position: absolute;\r\n    bottom: 80px;\r\n    right: 30px;\r\n    color: #e02020;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .button {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    background-color: #e02020;\r\n    color: white;\r\n    width: 80%;\r\n    padding: 10px;\r\n    border: none;\r\n    border-radius: 5px;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}