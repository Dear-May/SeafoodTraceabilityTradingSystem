{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport router from \"@/router\";\nimport axios from \"axios\";\nimport FooterComponent from \"@/components/FooterComponent.vue\";\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\nimport AvatarChangComponent from \"@/components/AvatarChangComponent.vue\";\nimport { Document, Location, Setting, User } from \"@element-plus/icons-vue\";\nimport { ElMessage } from \"element-plus\";\nconst MAX_FILE_SIZE = 3 * 1024 * 1024;\nexport default {\n  __name: 'AccountProfileView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const UserInfoForm = ref({\n      id: '',\n      name: '',\n      avatar: '',\n      nickname: '',\n      changTime: '',\n      gender: ''\n    });\n\n    // 检测是否存在session，如果存在，填写用户信息\n    const userBaseInfoFromSession = JSON.parse(sessionStorage.getItem('userBaseInfo'));\n    const nickName = ref();\n    const Gender = ref();\n    if (userBaseInfoFromSession) {\n      UserInfoForm.value.id = userBaseInfoFromSession.id;\n      UserInfoForm.value.name = userBaseInfoFromSession.username;\n      UserInfoForm.value.avatar = userBaseInfoFromSession.avatar;\n      UserInfoForm.value.nickname = userBaseInfoFromSession.nickname;\n      nickName.value = userBaseInfoFromSession.nickname;\n    } else {\n      router.push('/');\n    }\n    async function getUserInfo() {\n      try {\n        const response = await axios.post('/api/user/getUserOtherInfo', {\n          id: userBaseInfoFromSession.id,\n          name: userBaseInfoFromSession.username\n        });\n        if (response.data.changTime !== null) {\n          UserInfoForm.value.changTime = response.data.changTime;\n          UserInfoForm.value.gender = response.data.gender;\n          Gender.value = response.data.gender;\n        } else {\n          ElMessage.error(\"获取用户信息失败\");\n        }\n      } catch (error) {\n        ElMessage.error(\"获取用户信息失败\");\n      }\n    }\n    getUserInfo();\n    const isHovering = ref(false);\n    const activeName = ref('account_information');\n    function handleClick(tab, event) {\n      console.log(tab, event);\n      activeName.value = tab.name;\n    }\n    async function handleSave() {\n      if (UserInfoForm.value.changTime !== null && !(new Date().getTime() - new Date(UserInfoForm.value.changTime).getTime() > 7 * 24 * 60 * 60 * 1000) && UserInfoForm.value.nickname !== nickName.value) {\n        const time1 = new Date(UserInfoForm.value.changTime).getTime() - new Date(UserInfoForm.value.changTime).getTime();\n        ElMessage.error(\"距离上次修改时间过短，请等待\" + Math.floor((7 * 24 * 60 * 60 * 1000 - time1) / (24 * 60 * 60 * 1000)) + \"天后再修改\");\n      } else {\n        try {\n          const response = await axios.post('/api/user/updateUserOtherInfo', {\n            id: UserInfoForm.value.id,\n            name: UserInfoForm.value.name,\n            nickname: UserInfoForm.value.nickname,\n            gender: UserInfoForm.value.gender\n          }, {\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            withCredentials: true\n          });\n          if (response.data.code === 200) {\n            ElMessage.success(\"修改成功\");\n            // 更新session\n            sessionStorage.setItem('userBaseInfo', JSON.stringify({\n              id: userBaseInfoFromSession.id,\n              username: userBaseInfoFromSession.username,\n              avatar: userBaseInfoFromSession.avatar,\n              nickname: UserInfoForm.value.nickname\n            }));\n            window.location.reload();\n          } else if (response.data.code === 401) {\n            ElMessage.error(\"昵称带有违禁词，请重新修改!!!\");\n          } else if (response.data.code === 402) {\n            ElMessage.error(\"修改时间过短，请等待\");\n          } else {\n            ElMessage.error(\"修改失败\");\n          }\n        } catch (error) {\n          ElMessage.error(\"修改失败\");\n        }\n      }\n    }\n    const avatarUrl = ref('');\n    const fileInput = ref(null);\n    const errorMessage = ref('');\n    const triggerFileInput = () => {\n      fileInput.value.click();\n    };\n    const handleFileChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        // 检测文件是否为图片\n        if (!file.type.startsWith('image/')) {\n          ElMessage({\n            type: 'error',\n            message: '请选择图片文件（如 jpg、png 格式）'\n          });\n          // 重置文件选择框\n          resetAvatar();\n          return;\n        }\n\n        // 检测文件大小是否超过 3MB\n        if (file.size > MAX_FILE_SIZE) {\n          ElMessage({\n            type: 'error',\n            message: '文件大小不能超过 3MB'\n          });\n          // 重置文件选择框\n          resetAvatar();\n          return;\n        }\n        const reader = new FileReader();\n        reader.onload = e => {\n          avatarUrl.value = e.target.result;\n        };\n        reader.onerror = () => {\n          ElMessage({\n            type: 'error',\n            message: '文件读取失败，请重试'\n          });\n          resetAvatar();\n        };\n        reader.readAsDataURL(file);\n      }\n    };\n    const resetAvatar = () => {\n      avatarUrl.value = '';\n      fileInput.value.value = null;\n    };\n    async function uploadAvatar() {\n      const file = fileInput.value.files[0];\n      if (!file) {\n        errorMessage.value = '请选择一个图片文件';\n        return;\n      }\n      const formData = new FormData();\n      formData.append('avatar', file);\n      formData.append('username', UserInfoForm.value.name);\n      const response = await axios.post('/api/user/upload-avatar', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        withCredentials: true\n      });\n      if (response.data.code === 200) {\n        ElMessage.success('头像上传成功');\n        sessionStorage.setItem('userBaseInfo', JSON.stringify({\n          id: UserInfoForm.value.id,\n          username: UserInfoForm.value.name,\n          avatar: \"https://oss.yy0313.fit/UserAvatar/\" + UserInfoForm.value.name + \".jpg\",\n          nickname: UserInfoForm.value.nickname\n        }));\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000);\n      } else {\n        ElMessage.error('头像上传失败，请重试');\n      }\n    }\n    function handleAccountInfo() {\n      setTimeout(() => {\n        router.push('/profile/account_information');\n      }, 500);\n    }\n    function handleAddressManagement() {\n      setTimeout(() => {\n        router.push('/profile/address');\n      }, 500);\n    }\n    function handleForgetPassword() {\n      setTimeout(() => {\n        router.replace('/forgotPassword');\n      }, 500);\n    }\n    const __returned__ = {\n      UserInfoForm,\n      userBaseInfoFromSession,\n      nickName,\n      Gender,\n      getUserInfo,\n      isHovering,\n      activeName,\n      handleClick,\n      handleSave,\n      avatarUrl,\n      fileInput,\n      MAX_FILE_SIZE,\n      errorMessage,\n      triggerFileInput,\n      handleFileChange,\n      resetAvatar,\n      uploadAvatar,\n      handleAccountInfo,\n      handleAddressManagement,\n      handleForgetPassword,\n      ref,\n      get router() {\n        return router;\n      },\n      get axios() {\n        return axios;\n      },\n      FooterComponent,\n      RightWidgetComponent,\n      HeaderComponent,\n      AvatarChangComponent,\n      get Document() {\n        return Document;\n      },\n      get Location() {\n        return Location;\n      },\n      get Setting() {\n        return Setting;\n      },\n      get User() {\n        return User;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","router","axios","FooterComponent","RightWidgetComponent","HeaderComponent","AvatarChangComponent","Document","Location","Setting","User","ElMessage","MAX_FILE_SIZE","UserInfoForm","id","name","avatar","nickname","changTime","gender","userBaseInfoFromSession","JSON","parse","sessionStorage","getItem","nickName","Gender","value","username","push","getUserInfo","response","post","data","error","isHovering","activeName","handleClick","tab","event","console","log","handleSave","Date","getTime","time1","Math","floor","headers","withCredentials","code","success","setItem","stringify","window","location","reload","avatarUrl","fileInput","errorMessage","triggerFileInput","click","handleFileChange","file","target","files","type","startsWith","message","resetAvatar","size","reader","FileReader","onload","e","result","onerror","readAsDataURL","uploadAvatar","formData","FormData","append","setTimeout","handleAccountInfo","handleAddressManagement","handleForgetPassword","replace"],"sources":["D:/Cache/Java/shopping/shoppping_c_frontend/src/views/AccountProfileView.vue"],"sourcesContent":["<template>\r\n  <div class=\"account-management-page\">\r\n    <HeaderComponent/>\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary sidebar\"\r\n             style=\"width: 280px; height: 75vh; background-color: #d3d3d3;\">\r\n          <AvatarChangComponent/>\r\n          <hr>\r\n          <el-menu\r\n              active-text-color=\"#e02020\"\r\n              background-color=\"#d3d3d3\"\r\n              class=\"el-menu-vertical-demo\"\r\n              default-active=\"1-2\"\r\n              text-color=\"#303133\"\r\n              @open=\"handleOpen\"\r\n              @close=\"handleClose\"\r\n              style=\"border-radius: 10px;\"\r\n          >\r\n            <el-sub-menu index=\"1\">\r\n              <template #title>\r\n                <el-icon>\r\n                  <user/>\r\n                </el-icon>\r\n                <span style=\"font-weight: bold; font-size: 18px;\">账号管理</span>\r\n              </template>\r\n              <el-menu-item-group>\r\n                <el-menu-item index=\"1-1\" style=\"font-size: 16px; font-weight: bold;\" @click=\"handleAccountInfo\">\r\n                  安全设置\r\n                </el-menu-item>\r\n                <el-menu-item index=\"1-2\" style=\"font-size: 16px; font-weight: bold;\">\r\n                  个性设置\r\n                </el-menu-item>\r\n              </el-menu-item-group>\r\n            </el-sub-menu>\r\n            <el-menu-item index=\"2\" @click=\"handleAddressManagement\">\r\n              <el-icon>\r\n                <Location/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\">售后地址管理</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"3\">\r\n              <el-icon>\r\n                <document/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\">帮助中心</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"4\">\r\n              <el-icon>\r\n                <setting/>\r\n              </el-icon>\r\n              <span style=\"font-weight: bold; font-size: 18px;\" @click=\"handleForgetPassword\">忘记密码</span>\r\n            </el-menu-item>\r\n          </el-menu>\r\n          <template>\r\n            <footer>\r\n              <hr>\r\n            </footer>\r\n          </template>\r\n        </div>\r\n        <div class=\"col-9 main-content\">\r\n          <el-tabs\r\n              v-model=\"activeName\"\r\n              type=\"card\"\r\n              class=\"demo-tabs\"\r\n              @tab-click=\"handleClick\"\r\n          >\r\n            <el-tab-pane label=\"基本设置\" name=\"account_information\" @click=\"avatarUrl = ''\">\r\n              <div class=\"account-info\">\r\n                <h6 style=\"text-align: left; font-weight: bold; padding: 20px;\">亲爱的 {{\r\n                    UserInfoForm.name\r\n                  }}，填写真实的资料，有助于好友找到你哦。</h6>\r\n                <div class=\"form-group mt-4 row ml-4 mr-4\" style=\" padding-left: 20px;\">\r\n                  <div class=\"col-4 mt-5\">\r\n                    <label for=\"avatar\" class=\"mb-3\" style=\"font-weight: bold;\">当前头像</label>\r\n                  </div>\r\n                  <div class=\"col-8 card-wrapper\" style=\"text-align: left;\" @click=\"activeName = 'avatar_image'\">\r\n                    <img :src=\"UserInfoForm.avatar\" alt=\"User Avatar\" class=\"profile-avatar\"\r\n                         style=\"width: 100px; height: 100px; border-radius: 8px; object-fit: cover;\"\r\n                         @mouseover=\"isHovering = true\"\r\n                         @mouseout=\"isHovering = false\">\r\n                    <div v-if=\"isHovering\" class=\"edit-profile\">更换头像</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group mt-4 row ml-4 mr-4\" style=\"padding-left: 20px;\">\r\n                  <div class=\"col-4 mt-5\">\r\n                    <label for=\"nickname\" class=\"mb-2\" style=\"font-weight: bold;\">昵称</label>\r\n                  </div>\r\n                  <div class=\"col-8\" style=\"text-align: left;\">\r\n                    <input type=\"text\" id=\"nickname\" v-model=\"UserInfoForm.nickname\" class=\"form-control mt-5\"\r\n                           style=\"width: 30%;\">\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col-4 mt-5\"></div>\r\n                  <div class=\"col-8\" style=\"text-align: left;\">\r\n                    <el-alert\r\n                        class=\"mt-2\"\r\n                        title=\"1. 昵称设置成功后7天内不可修改；2. 不能填写违法、色情、赌博、暴力等不良信息。\"\r\n                        type=\"info\"\r\n                        :closable=\"false\"\r\n                        style=\"width: 70%;\"\r\n                        show-icon>\r\n                    </el-alert>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group mt-4 row ml-4 mr-4\" style=\"padding-left: 20px;\">\r\n                  <div class=\"col-4 mt-5\">\r\n                    <label for=\"gender\" class=\"mb-3\" style=\"font-weight: bold;\">性别</label>\r\n                  </div>\r\n                  <div class=\"col-8 mt-5\" style=\"text-align: left; \">\r\n                    <el-radio-group v-model=\"UserInfoForm.gender\">\r\n                      <el-radio label=\"male\">男</el-radio>\r\n                      <el-radio label=\"female\">女</el-radio>\r\n                      <el-radio label=\"null\">保密</el-radio>\r\n                    </el-radio-group>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group mt-4\" style=\"padding-left: 20px;\">\r\n                  <el-button type=\"primary\" size=\"default\" class=\"mt-3\"\r\n                             style=\"background-color: #e02020; border-color: #e02020; width: 30%; height: 40px;\"\r\n                             @click=\"handleSave\">保存\r\n                  </el-button>\r\n                </div>\r\n              </div>\r\n            </el-tab-pane>\r\n\r\n            <el-tab-pane label=\"头像图片\" name=\"avatar_image\">\r\n              <div class=\"avatar-upload-container\">\r\n                <div class=\"avatar-preview\">\r\n                  <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview\" class=\"avatar-preview-image\"/>\r\n                  <div v-else class=\"avatar-placeholder\">\r\n                    <span>头像预览</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"avatar-actions\">\r\n                  <div class=\"preview-sizes\">\r\n                    <h4>预览</h4>\r\n                    <div class=\"preview-size\">\r\n                      <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview 100x100\" width=\"100\" height=\"100\"\r\n                           style=\"border-radius: 50%\"/>\r\n                      <div v-else class=\"avatar-placeholder-small\"></div>\r\n                      <span>100 x 100</span>\r\n                    </div>\r\n                    <div class=\"preview-size\">\r\n                      <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview 50x50\" width=\"50\" height=\"50\"\r\n                           style=\"border-radius: 50%\"/>\r\n                      <div v-else class=\"avatar-placeholder-small\"></div>\r\n                      <span>50 x 50</span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"avatar-edit-buttons\">\r\n                    <el-button type=\"primary\" @click=\"triggerFileInput\">\r\n                      <i class=\"bi bi-upload\"></i>&nbsp;上传\r\n                    </el-button>\r\n                    <el-button type=\"danger\" @click=\"resetAvatar\">\r\n                      <i class=\"bi bi-x-circle\"></i>&nbsp;重置\r\n                    </el-button>\r\n                    <input type=\"file\" ref=\"fileInput\" @change=\"handleFileChange\" accept=\"image/*\"\r\n                           style=\"display: none\"/>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"dialog-footer\">\r\n                <el-button @click=\"resetAvatar\" style=\"width: 10%;\">取消\r\n                </el-button>\r\n                <el-button type=\"primary\" @click=uploadAvatar\r\n                           style=\"width: 10%; background-color: #e02020; border-color: #e02020; color: #fff;\">\r\n                  确认\r\n                </el-button>\r\n              </div>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <RightWidgetComponent/>\r\n  <FooterComponent/>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport router from \"@/router\";\r\nimport axios from \"axios\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport AvatarChangComponent from \"@/components/AvatarChangComponent.vue\";\r\nimport {Document, Location, Setting, User} from \"@element-plus/icons-vue\";\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nconst UserInfoForm = ref({\r\n  id: '',\r\n  name: '',\r\n  avatar: '',\r\n  nickname: '',\r\n  changTime: '',\r\n  gender: '',\r\n})\r\n\r\n// 检测是否存在session，如果存在，填写用户信息\r\nconst userBaseInfoFromSession = JSON.parse(sessionStorage.getItem('userBaseInfo'));\r\nconst nickName = ref();\r\nconst Gender = ref();\r\nif (userBaseInfoFromSession) {\r\n  UserInfoForm.value.id = userBaseInfoFromSession.id;\r\n  UserInfoForm.value.name = userBaseInfoFromSession.username;\r\n  UserInfoForm.value.avatar = userBaseInfoFromSession.avatar;\r\n  UserInfoForm.value.nickname = userBaseInfoFromSession.nickname;\r\n  nickName.value = userBaseInfoFromSession.nickname;\r\n} else {\r\n  router.push('/');\r\n}\r\n\r\nasync function getUserInfo() {\r\n  try {\r\n    const response = await axios.post('/api/user/getUserOtherInfo', {\r\n      id: userBaseInfoFromSession.id,\r\n      name: userBaseInfoFromSession.username,\r\n    });\r\n    if (response.data.changTime !== null) {\r\n      UserInfoForm.value.changTime = response.data.changTime;\r\n      UserInfoForm.value.gender = response.data.gender;\r\n      Gender.value = response.data.gender;\r\n    } else {\r\n      ElMessage.error(\"获取用户信息失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"获取用户信息失败\");\r\n  }\r\n}\r\n\r\ngetUserInfo();\r\n\r\nconst isHovering = ref(false);\r\nconst activeName = ref('account_information');\r\n\r\nfunction handleClick(tab, event) {\r\n  console.log(tab, event);\r\n  activeName.value = tab.name;\r\n}\r\n\r\nasync function handleSave() {\r\n  if (UserInfoForm.value.changTime !== null && !((new Date().getTime() - new Date(UserInfoForm.value.changTime).getTime()) > 7 * 24 * 60 * 60 * 1000) && UserInfoForm.value.nickname !== nickName.value\r\n  ) {\r\n    const time1 = new Date(UserInfoForm.value.changTime).getTime() - new Date(UserInfoForm.value.changTime).getTime();\r\n    ElMessage.error(\"距离上次修改时间过短，请等待\" + Math.floor((7 * 24 * 60 * 60 * 1000 - time1) / (24 * 60 * 60 * 1000)) + \"天后再修改\")\r\n  } else {\r\n    try {\r\n      const response = await axios.post('/api/user/updateUserOtherInfo', {\r\n        id: UserInfoForm.value.id,\r\n        name: UserInfoForm.value.name,\r\n        nickname: UserInfoForm.value.nickname,\r\n        gender: UserInfoForm.value.gender,\r\n      }, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        withCredentials: true\r\n      });\r\n      if (response.data.code === 200) {\r\n        ElMessage.success(\"修改成功\");\r\n        // 更新session\r\n        sessionStorage.setItem('userBaseInfo', JSON.stringify({\r\n          id: userBaseInfoFromSession.id,\r\n          username: userBaseInfoFromSession.username,\r\n          avatar: userBaseInfoFromSession.avatar,\r\n          nickname: UserInfoForm.value.nickname,\r\n        }));\r\n        window.location.reload();\r\n      } else if (response.data.code === 401) {\r\n        ElMessage.error(\"昵称带有违禁词，请重新修改!!!\");\r\n      } else if (response.data.code === 402) {\r\n        ElMessage.error(\"修改时间过短，请等待\");\r\n      } else {\r\n        ElMessage.error(\"修改失败\");\r\n      }\r\n    } catch (error) {\r\n      ElMessage.error(\"修改失败\");\r\n    }\r\n  }\r\n}\r\n\r\nconst avatarUrl = ref('');\r\nconst fileInput = ref(null);\r\nconst MAX_FILE_SIZE = 3 * 1024 * 1024;\r\nconst errorMessage = ref('');\r\n\r\nconst triggerFileInput = () => {\r\n  fileInput.value.click();\r\n};\r\n\r\nconst handleFileChange = (event) => {\r\n  const file = event.target.files[0];\r\n\r\n  if (file) {\r\n    // 检测文件是否为图片\r\n    if (!file.type.startsWith('image/')) {\r\n      ElMessage({\r\n        type: 'error',\r\n        message: '请选择图片文件（如 jpg、png 格式）',\r\n      });\r\n      // 重置文件选择框\r\n      resetAvatar();\r\n      return;\r\n    }\r\n\r\n    // 检测文件大小是否超过 3MB\r\n    if (file.size > MAX_FILE_SIZE) {\r\n      ElMessage({\r\n        type: 'error',\r\n        message: '文件大小不能超过 3MB',\r\n      });\r\n      // 重置文件选择框\r\n      resetAvatar();\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      avatarUrl.value = e.target.result;\r\n    };\r\n    reader.onerror = () => {\r\n      ElMessage({\r\n        type: 'error',\r\n        message: '文件读取失败，请重试',\r\n      });\r\n      resetAvatar();\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\n\r\nconst resetAvatar = () => {\r\n  avatarUrl.value = '';\r\n  fileInput.value.value = null;\r\n};\r\n\r\nasync function uploadAvatar() {\r\n  const file = fileInput.value.files[0];\r\n  if (!file) {\r\n    errorMessage.value = '请选择一个图片文件';\r\n    return;\r\n  }\r\n  const formData = new FormData();\r\n  formData.append('avatar', file);\r\n  formData.append('username', UserInfoForm.value.name)\r\n  const response = await axios.post('/api/user/upload-avatar', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n    withCredentials: true\r\n  })\r\n  if (response.data.code === 200) {\r\n    ElMessage.success('头像上传成功');\r\n    sessionStorage.setItem('userBaseInfo', JSON.stringify({\r\n      id: UserInfoForm.value.id,\r\n      username: UserInfoForm.value.name,\r\n      avatar: \"https://oss.yy0313.fit/UserAvatar/\" + UserInfoForm.value.name + \".jpg\",\r\n      nickname: UserInfoForm.value.nickname,\r\n    }));\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 1000);\r\n  } else {\r\n    ElMessage.error('头像上传失败，请重试');\r\n  }\r\n}\r\n\r\nfunction handleAccountInfo() {\r\n  setTimeout(() => {\r\n    router.push('/profile/account_information');\r\n  }, 500);\r\n}\r\n\r\nfunction handleAddressManagement() {\r\n  setTimeout(() => {\r\n    router.push('/profile/address');\r\n  }, 500);\r\n}\r\n\r\nfunction handleForgetPassword() {\r\n  setTimeout(() => {\r\n    router.replace('/forgotPassword');\r\n  }, 500);\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.account-management-page {\r\n  font-family: Arial, sans-serif;\r\n  display: flex;\r\n  padding: 20px;\r\n}\r\n\r\n.sidebar {\r\n  margin-top: 90px;\r\n  background-color: #ffffff;\r\n  padding: 20px;\r\n  border-right: 1px solid #eaeaea;\r\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\r\n  height: 70%;\r\n}\r\n\r\n.nav {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.nav-item {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.nav-link {\r\n  font-weight: bold;\r\n  color: #e02020;\r\n  text-decoration: none;\r\n}\r\n\r\n.nav-link.active {\r\n  background-color: #e02020;\r\n  color: white !important;\r\n}\r\n\r\n.sub-nav {\r\n  list-style: none;\r\n  padding-left: 20px;\r\n}\r\n\r\n.sub-nav li {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.main-content {\r\n  margin-top: 90px;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.profile-avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n  position: relative;\r\n  z-index: 2;\r\n  cursor: pointer;\r\n}\r\n\r\n.edit-profile {\r\n  position: absolute;\r\n  top: 73%;\r\n  width: 11%;\r\n  font-size: 12px;\r\n  color: white;\r\n  padding: 5px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex; /* 用于文字垂直居中 */\r\n  align-items: center; /* 垂直居中 */\r\n  justify-content: center; /* 水平居中 */\r\n  pointer-events: none;\r\n  z-index: 3;\r\n  opacity: 0.8;\r\n}\r\n\r\n.avatar-upload-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.avatar-preview {\r\n  width: 250px;\r\n  height: 250px;\r\n  border-radius: 50%;\r\n  border: 2px dashed #dcdcdc;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  background-color: #f5f5f5;\r\n  margin-top: 30px;\r\n  margin-left: 30%;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.avatar-placeholder {\r\n  font-size: 18px;\r\n  color: #888;\r\n  text-align: center;\r\n}\r\n\r\n.avatar-preview-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n}\r\n\r\n.avatar-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n  margin-right: 30%;\r\n}\r\n\r\n.preview-sizes {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.preview-size {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.avatar-placeholder-small {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  background-color: #dcdcdc;\r\n}\r\n\r\n.avatar-edit-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.night-mode {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .account-management-page {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .row {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .body {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .header {\r\n  background-color: #3c3c3c;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .sidebar {\r\n  background-color: #3c3c3c;\r\n  border-right: 1px solid #444;\r\n}\r\n\r\n.night-mode .sidebar .el-menu-item {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .sidebar.el-menu-item:hover {\r\n  background-color: #4c4c4c;\r\n}\r\n\r\n.night-mode .main-content,\r\n.night-mode .profile-section,\r\n.night-mode .order-section,\r\n.night-mode .logistics-section,\r\n.night-mode .logistics-item,\r\n.night-mode .profile-card,\r\n.night-mode .promotion-card {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .order-icon,\r\n.night-mode .logistics-action {\r\n  color: #ffa500;\r\n}\r\n\r\n.night-mode .right-widget {\r\n  background-color: #3c3c3c;\r\n  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .footer {\r\n  background-color: #2e2e2e;\r\n  border-top: 1px solid #333;\r\n}\r\n\r\n.night-mode .footer-links a {\r\n  color: #ffffff;\r\n}\r\n\r\n.night-mode .footer-links a:hover {\r\n  color: #e02020;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}