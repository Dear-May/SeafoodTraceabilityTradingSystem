{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"my-haichao-page\"\n};\nconst _hoisted_2 = {\n  class: \"main-content\"\n};\nconst _hoisted_3 = {\n  class: \"comment-list\"\n};\nconst _hoisted_4 = {\n  class: \"comment-score\"\n};\nconst _hoisted_5 = {\n  class: \"comment-info\"\n};\nconst _hoisted_6 = {\n  class: \"comment-content\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"comment-images\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  class: \"comment-time\"\n};\nconst _hoisted_10 = {\n  class: \"comment-store\"\n};\nconst _hoisted_11 = {\n  class: \"store-avatar\"\n};\nconst _hoisted_12 = [\"src\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  class: \"comment-product\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  class: \"product-price\"\n};\nconst _hoisted_17 = {\n  class: \"comment-work\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_rate = _resolveComponent(\"el-rate\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode($setup[\"HeaderComponent\"]), _createVNode($setup[\"SidebarComponent\"], {\n    ref: \"sidebarComponent\"\n  }, null, 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createStaticVNode(\"<header class=\\\"header\\\" data-v-3db36ee4><div class=\\\"comment-header\\\" data-v-3db36ee4><span class=\\\"store-name\\\" data-v-3db36ee4>评分</span><span class=\\\"product-info\\\" data-v-3db36ee4>评论</span><span class=\\\"price-info\\\" data-v-3db36ee4>商家</span><span class=\\\"quantity-info\\\" data-v-3db36ee4>商品信息</span><span class=\\\"subtotal-info\\\" data-v-3db36ee4>操作</span></div></header>\", 1)), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.commentInfo, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"comment-item\"\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_rate, {\n      modelValue: item.rate,\n      \"onUpdate:modelValue\": $event => item.rate = $event,\n      disabled: \"\",\n      \"show-score\": \"\",\n      \"text-color\": \"#ff9900\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString(item.content), 1 /* TEXT */), item.images !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.images, (image, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index\n      }, [_createElementVNode(\"img\", {\n        src: image,\n        alt: \"\",\n        width: \"50px\",\n        height: \"50px\"\n      }, null, 8 /* PROPS */, _hoisted_8)]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.formatDate(item.time)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"img\", {\n      src: item.storeAvatar,\n      alt: \"\",\n      width: \"50px\",\n      height: \"50px\"\n    }, null, 8 /* PROPS */, _hoisted_12)]), _createElementVNode(\"div\", {\n      class: \"store-name\",\n      onClick: $event => $setup.handleShop(item.shopId)\n    }, _toDisplayString(item.shopName), 9 /* TEXT, PROPS */, _hoisted_13)]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", {\n      class: \"product-name\",\n      onClick: $event => $setup.routerToProduct(item.goodId)\n    }, _toDisplayString(item.goodName), 9 /* TEXT, PROPS */, _hoisted_15), _createElementVNode(\"div\", _hoisted_16, \"￥\" + _toDisplayString(item.totalPrice), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_el_button, {\n      type: \"text\",\n      onClick: $event => $setup.handleDeleteComment(item.commentId)\n    }, {\n      default: _withCtx(() => [...(_cache[0] || (_cache[0] = [_createTextVNode(\"删除\")]))]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createVNode($setup[\"FooterComponent\"]), _createVNode($setup[\"RightWidgetComponent\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","$setup","ref","_hoisted_2","_createStaticVNode","_hoisted_3","_renderList","commentInfo","item","index","_hoisted_4","_component_el_rate","modelValue","rate","$event","disabled","_hoisted_5","_hoisted_6","_toDisplayString","content","images","_hoisted_7","image","src","alt","width","height","_hoisted_8","_createCommentVNode","_hoisted_9","formatDate","time","_hoisted_10","_hoisted_11","storeAvatar","_hoisted_12","onClick","handleShop","shopId","shopName","_hoisted_13","_hoisted_14","routerToProduct","goodId","goodName","_hoisted_15","_hoisted_16","totalPrice","_hoisted_17","_component_el_button","type","handleDeleteComment","commentId","default","_withCtx","_cache","_createTextVNode","_"],"sources":["D:\\Cache\\Java\\shopping\\shoppping_c_frontend\\src\\views\\MyCommentView.vue"],"sourcesContent":["<template>\r\n  <div class=\"my-haichao-page\">\r\n    <HeaderComponent/>\r\n    <SidebarComponent ref=\"sidebarComponent\"/>\r\n    <div class=\"main-content\">\r\n      <header class=\"header\">\r\n        <div class=\"comment-header\">\r\n          <span class=\"store-name\">评分</span>\r\n          <span class=\"product-info\">评论</span>\r\n          <span class=\"price-info\">商家</span>\r\n          <span class=\"quantity-info\">商品信息</span>\r\n          <span class=\"subtotal-info\">操作</span>\r\n        </div>\r\n      </header>\r\n      <div class=\"comment-list\">\r\n        <div v-for=\"(item, index) in commentInfo\" :key=\"index\" class=\"comment-item\">\r\n          <div class=\"comment-score\">\r\n            <el-rate\r\n                v-model=\"item.rate\"\r\n                disabled\r\n                show-score\r\n                text-color=\"#ff9900\"\r\n            />\r\n          </div>\r\n          <div class=\"comment-info\">\r\n            <div class=\"comment-content\">{{ item.content }}</div>\r\n            <div class=\"comment-images\" v-if=\"item.images!== null\">\r\n              <div v-for=\"(image, index) in item.images\" :key=\"index\">\r\n                <img :src=\"image\" alt=\"\" width=\"50px\" height=\"50px\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"comment-time\">{{ formatDate(item.time) }}</div>\r\n          </div>\r\n          <div class=\"comment-store\">\r\n            <div class=\"store-avatar\">\r\n              <img :src=\"item.storeAvatar\" alt=\"\" width=\"50px\" height=\"50px\"/>\r\n            </div>\r\n            <div class=\"store-name\" @click=\"handleShop(item.shopId)\">{{ item.shopName }}</div>\r\n          </div>\r\n          <div class=\"comment-product\">\r\n            <div class=\"product-name\" @click=\"routerToProduct(item.goodId)\">{{ item.goodName }}</div>\r\n            <div class=\"product-price\">￥{{ item.totalPrice }}</div>\r\n          </div>\r\n          <div class=\"comment-work\">\r\n            <el-button type=\"text\" @click=\"handleDeleteComment(item.commentId)\">删除</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <FooterComponent/>\r\n  <RightWidgetComponent/>\r\n</template>\r\n\r\n<script setup>\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport SidebarComponent from \"@/components/SidebarComponent.vue\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport router from \"@/router\";\r\nimport axios from \"axios\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport useUser from \"@/composables/useUser\";\r\n\r\nconst {UserInfoForm, initUserSession} = useUser()\r\n\r\nconst sidebarComponent = ref(null);\r\n\r\nfunction initSidebar() {\r\n  sidebarComponent.value.setActive(10);\r\n}\r\n\r\nconst commentInfo = ref([]);\r\n\r\nasync function initCommentInfo() {\r\n  try {\r\n    const response = await axios.post(\"/api/pay/comment/getComment\", {\r\n      userId: UserInfoForm.value.id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data != null) {\r\n      commentInfo.value = response.data;\r\n    } else {\r\n      ElMessage.error('获取评论失败，请稍后再试');\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('获取评论失败，请稍后再试');\r\n  }\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // 月份需加1，并补零\r\n  const day = String(date.getDate()).padStart(2, '0'); // 补零\r\n\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nasync function handleDeleteComment(commentId) {\r\n  try {\r\n    const response = await axios.post(\"/api/pay/comment/deleteComment\", {\r\n      userId: UserInfoForm.value.id,\r\n      commentId: commentId,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data.code === 200) {\r\n      ElMessage.success('删除成功');\r\n      await initCommentInfo();\r\n    } else {\r\n      ElMessage.error('删除失败，请稍后再试');\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('删除失败，请稍后再试');\r\n  }\r\n}\r\n\r\nfunction handleShop(id) {\r\n  router.push('/shop?shopId=' + id);\r\n}\r\n\r\nfunction routerToProduct(goodId) {\r\n  router.push('/goodDetail?id=' + goodId);\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  initSidebar();\r\n  await initCommentInfo();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.my-haichao-page {\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-family: Arial, sans-serif;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  margin-top: 90px;\r\n  min-height: calc(90vh - 100px);\r\n\r\n  .comment-header {\r\n    display: grid;\r\n    grid-template-columns: 10% 35% 15% 25% 15%;\r\n    padding: 10px;\r\n    font-weight: bold;\r\n    color: #555;\r\n    border-bottom: 1px solid #ddd;\r\n    text-align: center;\r\n  }\r\n\r\n  .comment-item {\r\n    width: 100%;\r\n    display: grid;\r\n    grid-template-columns: 10% 35% 15% 25% 15%;\r\n    align-items: center;\r\n    padding: 15px 20px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    text-align: center;\r\n\r\n    .comment-score {\r\n      margin-top: 10px;\r\n      text-align: center;\r\n    }\r\n\r\n    .comment-info {\r\n      margin-top: 10px;\r\n      font-size: 14px;\r\n      color: #333;\r\n\r\n      .comment-content {\r\n        margin-top: 10px;\r\n        font-size: 20px;\r\n        color: #333;\r\n      }\r\n\r\n      .comment-images {\r\n        margin-top: 10px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: center;\r\n\r\n        img {\r\n          margin: 5px;\r\n          border-radius: 5px;\r\n          box-shadow: 0 0 5px #ccc;\r\n        }\r\n      }\r\n\r\n      .comment-time {\r\n        margin-top: 10px;\r\n        font-size: 14px;\r\n        color: #999;\r\n      }\r\n\r\n    }\r\n\r\n    .comment-store {\r\n      margin-top: 10px;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .store-avatar {\r\n        margin-right: 10px;\r\n      }\r\n\r\n      .store-name {\r\n        font-size: 16px;\r\n        color: #333;\r\n\r\n        &:hover {\r\n          color: #e02020;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n\r\n    .comment-product {\r\n      margin-top: 10px;\r\n      display: block;\r\n      align-items: center;\r\n\r\n      .product-name {\r\n        font-size: 16px;\r\n        color: #333;\r\n\r\n        &:hover {\r\n          color: #e02020;\r\n        }\r\n      }\r\n\r\n      .product-price {\r\n        margin-left: 10px;\r\n        font-size: 16px;\r\n        color: #e02020;\r\n      }\r\n    }\r\n\r\n    .comment-work {\r\n      margin-top: 10px;\r\n      display: flex;\r\n      justify-content: center;\r\n\r\n      .el-button {\r\n        margin-left: 10px;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}