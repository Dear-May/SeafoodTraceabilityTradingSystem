{"ast":null,"code":"import { createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createBlock as _createBlock, Transition as _Transition, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-1 sidebar p-0\",\n  style: {\n    \"margin-top\": \"5vh\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"d-flex flex-column flex-shrink-0 bg-light\",\n  style: {\n    \"height\": \"79vh\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"nav nav-pills nav-flush flex-column mb-auto text-center\"\n};\nconst _hoisted_6 = {\n  class: \"col-11 main-content\",\n  style: {\n    \"padding\": \"5px\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"chat-container d-flex\"\n};\nconst _hoisted_8 = {\n  class: \"contact-list bg-white border-end p-2\",\n  style: {\n    \"width\": \"25%\",\n    \"border-radius\": \"20px 0 0 20px\"\n  }\n};\nconst _hoisted_9 = {\n  class: \"list-group list-group-flush\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = [\"innerHTML\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"badge bg-danger text-white rounded-pill me-2\"\n};\nconst _hoisted_14 = {\n  class: \"text-muted\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  key: 0,\n  class: \"chat-section flex-grow-1 p-2\"\n};\nconst _hoisted_17 = {\n  class: \"chat-header border-bottom pb-2 mb-3\",\n  style: {\n    \"text-align\": \"start\"\n  }\n};\nconst _hoisted_18 = {\n  class: \"chat-messages mb-3\",\n  style: {\n    \"height\": \"50vh\",\n    \"overflow-y\": \"auto\"\n  },\n  ref: \"chatWindowRef\"\n};\nconst _hoisted_19 = {\n  class: \"message-content\"\n};\nconst _hoisted_20 = [\"innerHTML\"];\nconst _hoisted_21 = {\n  key: 2,\n  class: \"product-item d-flex align-items-center mb-2\",\n  style: {\n    \"background-color\": \"#f5f5f5\",\n    \"padding\": \"10px\",\n    \"border-radius\": \"10px\"\n  }\n};\nconst _hoisted_22 = [\"src\"];\nconst _hoisted_23 = {\n  class: \"mb-1\"\n};\nconst _hoisted_24 = {\n  class: \"text-muted\"\n};\nconst _hoisted_25 = {\n  key: 2,\n  class: \"message-status\"\n};\nconst _hoisted_26 = {\n  key: 0,\n  class: \"read-status\"\n};\nconst _hoisted_27 = {\n  key: 1,\n  class: \"unread-status\"\n};\nconst _hoisted_28 = {\n  class: \"input-toolbar d-flex align-items-center mb-2\"\n};\nconst _hoisted_29 = {\n  key: 1\n};\nconst _hoisted_30 = {\n  class: \"input-group\"\n};\nconst _hoisted_31 = {\n  style: {\n    \"text-align\": \"right\"\n  }\n};\nconst _hoisted_32 = {\n  key: 0,\n  class: \"additional-info bg-white border-start p-2\",\n  style: {\n    \"width\": \"20%\",\n    \"margin-top\": \"5vh\",\n    \"border-radius\": \"0 20px 20px 0\"\n  }\n};\nconst _hoisted_33 = [\"src\"];\nconst _hoisted_34 = {\n  class: \"mb-1\"\n};\nconst _hoisted_35 = {\n  class: \"text-muted\"\n};\nconst _hoisted_36 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_emoji_picker = _resolveComponent(\"emoji-picker\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_footer = _resolveComponent(\"el-footer\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"HeaderComponent\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Sidebar \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"ul\", _hoisted_5, [_createVNode(_component_el_tooltip, {\n    class: \"box-item\",\n    effect: \"dark\",\n    content: \"商家消息\",\n    placement: \"right\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createElementVNode(\"li\", {\n      class: \"nav-item\"\n    }, [_createElementVNode(\"a\", {\n      href: \"#\",\n      class: \"nav-link active py-3 border-bottom rounded-0\",\n      \"aria-current\": \"page\",\n      \"data-bs-toggle\": \"tooltip\",\n      \"data-bs-placement\": \"right\"\n    }, [_createElementVNode(\"i\", {\n      class: \"bi bi-chat-right-text-fill\",\n      style: {\n        \"font-size\": \"1.5rem\"\n      }\n    })])], -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_tooltip, {\n    class: \"box-item\",\n    effect: \"dark\",\n    content: \"用户消息\",\n    placement: \"right\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n      href: \"#\",\n      class: \"nav-link py-3 border-bottom rounded-0\",\n      title: \"Dashboard\",\n      \"data-bs-toggle\": \"tooltip\",\n      \"data-bs-placement\": \"right\"\n    }, [_createElementVNode(\"i\", {\n      class: \"bi bi-people-fill\",\n      style: {\n        \"font-size\": \"1.5rem\"\n      }\n    })])], -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_tooltip, {\n    class: \"box-item\",\n    effect: \"dark\",\n    content: \"官方客服\",\n    placement: \"right\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n      href: \"#\",\n      class: \"nav-link py-3 border-bottom rounded-0\",\n      title: \"Orders\",\n      \"data-bs-toggle\": \"tooltip\",\n      \"data-bs-placement\": \"right\"\n    }, [_createElementVNode(\"i\", {\n      class: \"bi bi-table\"\n    })])], -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_tooltip, {\n    class: \"box-item\",\n    effect: \"dark\",\n    content: \"官方消息\",\n    placement: \"right\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n      href: \"#\",\n      class: \"nav-link py-3 border-bottom rounded-0\",\n      title: \"Products\",\n      \"data-bs-toggle\": \"tooltip\",\n      \"data-bs-placement\": \"right\"\n    }, [_createElementVNode(\"i\", {\n      class: \"bi bi-grid\"\n    })])], -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _cache[6] || (_cache[6] = _createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"#\",\n    class: \"nav-link py-3 border-bottom rounded-0\",\n    title: \"Customers\",\n    \"data-bs-toggle\": \"tooltip\",\n    \"data-bs-placement\": \"right\"\n  }, [_createElementVNode(\"i\", {\n    class: \"bi bi-people\"\n  })])], -1 /* HOISTED */))])])]), _createCommentVNode(\" Main Content \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createCommentVNode(\" Contact List Section \"), _createElementVNode(\"div\", _hoisted_8, [_cache[7] || (_cache[7] = _createStaticVNode(\"<div class=\\\"search-box mb-3\\\" data-v-0f5f7bd5><div style=\\\"text-align:start;\\\" class=\\\"mb-1\\\" data-v-0f5f7bd5><i class=\\\"bi bi-chat-heart\\\" data-v-0f5f7bd5></i>  <a style=\\\"font-weight:bold;\\\" data-v-0f5f7bd5>聊天列表</a></div><input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"搜索最近联系人...\\\" style=\\\"border-radius:20px;\\\" data-v-0f5f7bd5></div>\", 1)), _createElementVNode(\"ul\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.contacts, (contact, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: _normalizeClass([\"list-group-item d-flex justify-content-between align-items-center\", {\n        'active': $setup.selectedContactIndex === index\n      }]),\n      onClick: $event => $setup.selectContact(index)\n    }, [_createElementVNode(\"div\", null, [_createElementVNode(\"img\", {\n      src: contact.avatar,\n      alt: \"Avatar\",\n      class: \"rounded-circle me-2\",\n      style: {\n        \"width\": \"30px\",\n        \"height\": \"30px\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_11), _createElementVNode(\"span\", null, _toDisplayString(contact.name), 1 /* TEXT */), _createElementVNode(\"p\", {\n      class: \"text-secondary\",\n      innerHTML: contact.lastMessage\n    }, null, 8 /* PROPS */, _hoisted_12)]), _createElementVNode(\"div\", null, [contact.unread > 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString(contact.unread), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", _hoisted_14, _toDisplayString(contact.time), 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $setup.deleteContact(index), [\"stop\"]),\n      class: \"btn btn-close ms-2\"\n    }, null, 8 /* PROPS */, _hoisted_15)])], 10 /* CLASS, PROPS */, _hoisted_10);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Chat Section \"), _createVNode(_component_el_container, null, {\n    default: _withCtx(() => [$setup.selectedContactIndex !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createVNode(_component_el_header, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"h5\", null, _toDisplayString($setup.selectedContact.name), 1 /* TEXT */)])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatData[$setup.selectedContact.id], (message, messageIndex) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: messageIndex,\n        class: _normalizeClass([\"message\", {\n          self: message.isSelf\n        }])\n      }, [!message.isSelf ? (_openBlock(), _createBlock(_component_el_avatar, {\n        key: 0,\n        src: $setup.selectedContact.avatar,\n        size: \"default\",\n        class: \"avatar\"\n      }, null, 8 /* PROPS */, [\"src\"])) : _createCommentVNode(\"v-if\", true), message.isSelf ? (_openBlock(), _createBlock(_component_el_avatar, {\n        key: 1,\n        src: $setup.UserInfoForm.avatar,\n        size: \"default\",\n        class: \"avatar\"\n      }, null, 8 /* PROPS */, [\"src\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_19, [message.contentType === 'text' ? (_openBlock(), _createElementBlock(\"p\", {\n        key: 0,\n        innerHTML: message.content\n      }, null, 8 /* PROPS */, _hoisted_20)) : message.contentType === 'image' ? (_openBlock(), _createBlock(_component_el_image, {\n        key: 1,\n        src: message.content,\n        class: \"img-fluid\",\n        style: {\n          \"width\": \"100px\",\n          \"height\": \"auto\"\n        },\n        \"preview-src-list\": [message.content],\n        alt: \"Image\"\n      }, null, 8 /* PROPS */, [\"src\", \"preview-src-list\"])) : message.contentType === 'link' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_createElementVNode(\"img\", {\n        src: message.content.image,\n        alt: \"Product\",\n        class: \"me-2\",\n        style: {\n          \"width\": \"40px\",\n          \"height\": \"40px\"\n        }\n      }, null, 8 /* PROPS */, _hoisted_22), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_23, _toDisplayString(message.content.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_24, _toDisplayString(message.content.price) + \" 元\", 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true)]), message.isSelf ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [message.isRead ? (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"已读\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_27, \"未读\"))])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n    }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Additional messages here \")], 512 /* NEED_PATCH */), _createVNode(_component_el_footer, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_28, [_createVNode(_Transition, {\n        name: \"fade\"\n      }, {\n        default: _withCtx(() => [$setup.showEmojiPicker ? (_openBlock(), _createBlock(_component_emoji_picker, {\n          key: 0,\n          onEmojiClick: $setup.addEmoji,\n          style: {\n            \"position\": \"absolute\",\n            \"bottom\": \"300px\",\n            \"left\": \"600px\"\n          }\n        })) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"i\", {\n        class: \"bi bi-emoji-smile me-3\",\n        style: {\n          \"font-size\": \"1.5rem\",\n          \"cursor\": \"pointer\"\n        },\n        onClick: $setup.toggleEmojiPicker\n      }), _createVNode(_component_el_upload, {\n        \"show-file-list\": false,\n        \"before-upload\": $setup.beforeUpload,\n        accept: \"image/*\"\n      }, {\n        default: _withCtx(() => _cache[8] || (_cache[8] = [_createElementVNode(\"i\", {\n          class: \"bi bi-card-image me-3\",\n          style: {\n            \"font-size\": \"1.5rem\",\n            \"cursor\": \"pointer\"\n          }\n        }, null, -1 /* HOISTED */)])),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"i\", {\n        class: \"bi bi-scissors me-3\",\n        style: {\n          \"font-size\": \"1.5rem\",\n          \"cursor\": \"pointer\"\n        },\n        onClick: $setup.takeScreenshot\n      }), _createVNode(_component_el_dialog, {\n        modelValue: $setup.dialogVisible,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.dialogVisible = $event),\n        width: \"60vw\",\n        \"before-close\": $setup.handleClose\n      }, {\n        default: _withCtx(() => [$setup.imageSrc ? (_openBlock(), _createBlock($setup[\"VueCropper\"], {\n          key: 0,\n          ref: \"cropper\",\n          src: $setup.imageSrc,\n          \"aspect-ratio\": 16 / 9,\n          \"view-mode\": 1,\n          \"auto-crop-area\": 0.5,\n          guides: true,\n          \"auto-crop\": true,\n          background: true,\n          \"drag-mode\": _ctx.move\n        }, null, 8 /* PROPS */, [\"src\", \"drag-mode\"])) : _createCommentVNode(\"v-if\", true), $setup.imageSrc ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.cropImage,\n          style: {\n            \"border-radius\": \"20px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"裁剪并发送\")])),\n          _: 1 /* STABLE */\n        })])) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_30, [_withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newMessage = $event),\n        class: \"form-control border-0 bg-transparent\",\n        placeholder: \"请输入消息，按Enter键 或 点击发送按钮发送\",\n        onKeydown: _withKeys($setup.send, [\"enter\"]),\n        style: {\n          \"min-height\": \"95px\",\n          \"resize\": \"none\"\n        }\n      }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.newMessage]])]), _createElementVNode(\"div\", _hoisted_31, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.send,\n        style: {\n          \"border-radius\": \"20px\"\n        }\n      }, {\n        default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"发送\")])),\n        _: 1 /* STABLE */\n      })])]),\n      _: 1 /* STABLE */\n    })])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Additional Info Section \"), $setup.selectedContactIndex !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"info-header mb-3\"\n  }, [_createElementVNode(\"h6\", null, \"正在咨询的宝贝\")], -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, product => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: product.id,\n      class: \"product-item d-flex align-items-center mb-2\"\n    }, [_createElementVNode(\"img\", {\n      src: product.image,\n      alt: \"Product\",\n      class: \"me-2\",\n      style: {\n        \"width\": \"40px\",\n        \"height\": \"40px\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_33), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_34, _toDisplayString(product.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_35, _toDisplayString(product.price), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      class: \"btn btn-outline-primary btn-sm\",\n      style: {\n        \"border-radius\": \"20px\"\n      },\n      onClick: $event => $setup.sendProductLink(product)\n    }, \"发送宝贝链接 \", 8 /* PROPS */, _hoisted_36)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)])])])]), _createVNode($setup[\"RightWidgetComponent\"]), _createVNode($setup[\"FooterComponent\"], {\n    ref: \"footer\",\n    onInitUserChat: $setup.handleInitChat\n  }, null, 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","key","ref","_createElementBlock","_Fragment","_createVNode","$setup","_createElementVNode","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_component_el_tooltip","effect","content","placement","default","_withCtx","_cache","href","_","title","_hoisted_6","_hoisted_7","_hoisted_8","_createStaticVNode","_hoisted_9","_renderList","contacts","contact","index","_normalizeClass","selectedContactIndex","onClick","$event","selectContact","src","avatar","alt","_hoisted_11","_toDisplayString","name","innerHTML","lastMessage","_hoisted_12","unread","_hoisted_13","_hoisted_14","time","_withModifiers","deleteContact","_hoisted_15","_hoisted_10","_component_el_container","_hoisted_16","_component_el_header","_hoisted_17","selectedContact","_hoisted_18","chatData","id","message","messageIndex","self","isSelf","_createBlock","_component_el_avatar","size","UserInfoForm","_hoisted_19","contentType","_hoisted_20","_component_el_image","_hoisted_21","image","_hoisted_22","_hoisted_23","_hoisted_24","price","_hoisted_25","isRead","_hoisted_26","_hoisted_27","_component_el_footer","_hoisted_28","_Transition","showEmojiPicker","_component_emoji_picker","onEmojiClick","addEmoji","toggleEmojiPicker","_component_el_upload","beforeUpload","accept","takeScreenshot","_component_el_dialog","modelValue","dialogVisible","width","handleClose","imageSrc","guides","background","_ctx","move","_hoisted_29","_component_el_button","type","cropImage","_createTextVNode","_hoisted_30","newMessage","placeholder","onKeydown","_withKeys","send","_hoisted_31","_hoisted_32","products","product","_hoisted_33","_hoisted_34","_hoisted_35","sendProductLink","_hoisted_36","onInitUserChat","handleInitChat"],"sources":["D:\\Cache\\Java\\shopping\\shoppping_c_frontend\\src\\views\\TalkToStoreView.vue"],"sourcesContent":["<template>\r\n  <HeaderComponent/>\r\n  <div class=\"container-fluid mt-5\">\r\n    <div class=\"row\">\r\n      <!-- Sidebar -->\r\n      <div class=\"col-1 sidebar p-0\" style=\"margin-top: 5vh;\">\r\n        <div class=\"d-flex flex-column flex-shrink-0 bg-light\" style=\"height: 79vh\">\r\n          <ul class=\"nav nav-pills nav-flush flex-column mb-auto text-center\">\r\n            <el-tooltip\r\n                class=\"box-item\"\r\n                effect=\"dark\"\r\n                content=\"商家消息\"\r\n                placement=\"right\"\r\n            >\r\n              <li class=\"nav-item\">\r\n                <a href=\"#\" class=\"nav-link active py-3 border-bottom rounded-0\" aria-current=\"page\"\r\n                   data-bs-toggle=\"tooltip\" data-bs-placement=\"right\">\r\n                  <i class=\"bi bi-chat-right-text-fill\" style=\"font-size: 1.5rem;\"></i>\r\n                </a>\r\n              </li>\r\n            </el-tooltip>\r\n            <el-tooltip\r\n                class=\"box-item\"\r\n                effect=\"dark\"\r\n                content=\"用户消息\"\r\n                placement=\"right\"\r\n            >\r\n              <li>\r\n                <a href=\"#\" class=\"nav-link py-3 border-bottom rounded-0\" title=\"Dashboard\" data-bs-toggle=\"tooltip\"\r\n                   data-bs-placement=\"right\">\r\n                  <i class=\"bi bi-people-fill\" style=\"font-size: 1.5rem;\"></i>\r\n                </a>\r\n              </li>\r\n            </el-tooltip>\r\n            <el-tooltip\r\n                class=\"box-item\"\r\n                effect=\"dark\"\r\n                content=\"官方客服\"\r\n                placement=\"right\"\r\n            >\r\n              <li>\r\n                <a href=\"#\" class=\"nav-link py-3 border-bottom rounded-0\" title=\"Orders\" data-bs-toggle=\"tooltip\"\r\n                   data-bs-placement=\"right\">\r\n                  <i class=\"bi bi-table\"></i>\r\n                </a>\r\n              </li>\r\n            </el-tooltip>\r\n            <el-tooltip\r\n                class=\"box-item\"\r\n                effect=\"dark\"\r\n                content=\"官方消息\"\r\n                placement=\"right\"\r\n            >\r\n              <li>\r\n                <a href=\"#\" class=\"nav-link py-3 border-bottom rounded-0\" title=\"Products\" data-bs-toggle=\"tooltip\"\r\n                   data-bs-placement=\"right\">\r\n                  <i class=\"bi bi-grid\"></i>\r\n                </a>\r\n              </li>\r\n            </el-tooltip>\r\n            <li>\r\n              <a href=\"#\" class=\"nav-link py-3 border-bottom rounded-0\" title=\"Customers\" data-bs-toggle=\"tooltip\"\r\n                 data-bs-placement=\"right\">\r\n                <i class=\"bi bi-people\"></i>\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <!-- Main Content -->\r\n      <div class=\"col-11 main-content\" style=\"padding: 5px;\">\r\n        <div class=\"chat-container d-flex\">\r\n          <!-- Contact List Section -->\r\n          <div class=\"contact-list bg-white border-end p-2\" style=\"width: 25%; border-radius:20px 0 0 20px;\">\r\n            <div class=\"search-box mb-3\">\r\n              <div style=\"text-align: start\" class=\"mb-1\">\r\n                <i class=\"bi bi-chat-heart\"></i>&nbsp;&nbsp;<a style=\"font-weight: bold\">聊天列表</a>\r\n              </div>\r\n              <input type=\"text\" class=\"form-control\" placeholder=\"搜索最近联系人...\" style=\"border-radius: 20px;\">\r\n            </div>\r\n            <ul class=\"list-group list-group-flush\">\r\n              <li\r\n                  v-for=\"(contact, index) in contacts\"\r\n                  :key=\"index\"\r\n                  class=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                  @click=\"selectContact(index)\"\r\n                  :class=\"{ 'active': selectedContactIndex === index }\">\r\n                <div>\r\n                  <img :src=\"contact.avatar\" alt=\"Avatar\" class=\"rounded-circle me-2\"\r\n                       style=\"width: 30px; height: 30px;\">\r\n                  <span>{{ contact.name }}</span>\r\n                  <p class=\"text-secondary\" v-html=\"contact.lastMessage\"></p>\r\n                </div>\r\n                <div>\r\n                  <span v-if=\"contact.unread > 0\" class=\"badge bg-danger text-white rounded-pill me-2\">{{\r\n                      contact.unread\r\n                    }}</span>\r\n                  <span class=\"text-muted\">{{ contact.time }}</span>\r\n                  <button @click.stop=\"deleteContact(index)\" class=\"btn btn-close ms-2\"></button>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <!-- Chat Section -->\r\n          <el-container>\r\n            <div v-if=\"selectedContactIndex !== null\" class=\"chat-section flex-grow-1 p-2\">\r\n              <el-header>\r\n                <div class=\"chat-header border-bottom pb-2 mb-3\" style=\"text-align: start\">\r\n                  <h5>{{ selectedContact.name }}</h5>\r\n                </div>\r\n              </el-header>\r\n              <div class=\"chat-messages mb-3\" style=\"height: 50vh; overflow-y: auto;\" ref=\"chatWindowRef\">\r\n                <div\r\n                    v-for=\"(message, messageIndex) in chatData[selectedContact.id]\"\r\n                    :key=\"messageIndex\"\r\n                    class=\"message\"\r\n                    :class=\"{ self: message.isSelf }\"\r\n                >\r\n                  <el-avatar\r\n                      v-if=\"!message.isSelf\"\r\n                      :src=\"selectedContact.avatar\"\r\n                      size=\"default\"\r\n                      class=\"avatar\"\r\n                  ></el-avatar>\r\n                  <el-avatar\r\n                      v-if=\"message.isSelf\"\r\n                      :src=\"UserInfoForm.avatar\"\r\n                      size=\"default\"\r\n                      class=\"avatar\"\r\n                  ></el-avatar>\r\n                  <div class=\"message-content\">\r\n                    <p v-html=\"message.content\" v-if=\"message.contentType === 'text'\"></p>\r\n                    <el-image :src=\"message.content\" v-else-if=\"message.contentType === 'image'\" class=\"img-fluid\"\r\n                              style=\"width: 100px; height: auto;\"\r\n                              :preview-src-list=\"[message.content]\"\r\n                              alt=\"Image\"/>\r\n                    <div\r\n                        v-else-if=\"message.contentType === 'link'\"\r\n                        class=\"product-item d-flex align-items-center mb-2\"\r\n                        style=\"background-color: #f5f5f5; padding: 10px; border-radius: 10px;\"\r\n                    >\r\n                      <img\r\n                          :src=\"message.content.image\"\r\n                          alt=\"Product\"\r\n                          class=\"me-2\"\r\n                          style=\"width: 40px; height: 40px;\"\r\n                      >\r\n                      <div>\r\n                        <p class=\"mb-1\">{{ message.content.name }}</p>\r\n                        <span class=\"text-muted\">{{ message.content.price }} 元</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n                  <div v-if=\"message.isSelf\" class=\"message-status\">\r\n                    <span v-if=\"message.isRead\" class=\"read-status\">已读</span>\r\n                    <span v-else class=\"unread-status\">未读</span>\r\n                  </div>\r\n                </div>\r\n                <!-- Additional messages here -->\r\n              </div>\r\n              <el-footer>\r\n                <div class=\"input-toolbar d-flex align-items-center mb-2\">\r\n                  <transition name=\"fade\">\r\n                    <emoji-picker\r\n                        v-if=\"showEmojiPicker\"\r\n                        @emoji-click=\"addEmoji\"\r\n                        style=\"position: absolute; bottom:300px; left: 600px;\"\r\n                    ></emoji-picker>\r\n                  </transition>\r\n                  <i class=\"bi bi-emoji-smile me-3\" style=\"font-size: 1.5rem; cursor: pointer;\"\r\n                     @click=\"toggleEmojiPicker\"></i>\r\n                  <el-upload\r\n                      :show-file-list=\"false\"\r\n                      :before-upload=\"beforeUpload\"\r\n                      accept=\"image/*\"\r\n                  >\r\n                    <i class=\"bi bi-card-image me-3\" style=\"font-size: 1.5rem; cursor: pointer;\"></i>\r\n                  </el-upload>\r\n                  <i class=\"bi bi-scissors me-3\" style=\"font-size: 1.5rem; cursor: pointer;\"\r\n                     @click=\"takeScreenshot\"></i>\r\n                  <el-dialog\r\n                      v-model=\"dialogVisible\"\r\n                      width=60vw\r\n                      :before-close=\"handleClose\"\r\n                  >\r\n                    <vue-cropper\r\n                        v-if=\"imageSrc\"\r\n                        ref=\"cropper\"\r\n                        :src=\"imageSrc\"\r\n                        :aspect-ratio=\"16 / 9\"\r\n                        :view-mode=\"1\"\r\n                        :auto-crop-area=\"0.5\"\r\n                        :guides=\"true\"\r\n                        :auto-crop=\"true\"\r\n                        :background=\"true\"\r\n                        :drag-mode=\"move\"\r\n                    ></vue-cropper>\r\n                    <div v-if=\"imageSrc\">\r\n                      <el-button type=\"primary\" @click=\"cropImage\" style=\"border-radius: 20px;\">裁剪并发送</el-button>\r\n                    </div>\r\n                  </el-dialog>\r\n                </div>\r\n                <div class=\"input-group\">\r\n                  <textarea v-model=\"newMessage\"\r\n                            class=\"form-control border-0 bg-transparent\"\r\n                            placeholder=\"请输入消息，按Enter键 或 点击发送按钮发送\"\r\n                            @keydown.enter=\"send\"\r\n                            style=\"min-height: 95px; resize: none;\"></textarea>\r\n                </div>\r\n                <div style=\"text-align: right;\">\r\n                  <el-button type=\"primary\" @click=\"send\" style=\"border-radius: 20px;\">发送</el-button>\r\n                </div>\r\n              </el-footer>\r\n            </div>\r\n          </el-container>\r\n          <!-- Additional Info Section -->\r\n          <div class=\"additional-info bg-white border-start p-2\" v-if=\"selectedContactIndex !== null\"\r\n               style=\"width: 20%; margin-top: 5vh; border-radius: 0 20px 20px 0;\">\r\n\r\n            <div class=\"info-header mb-3\">\r\n              <h6>正在咨询的宝贝</h6>\r\n            </div>\r\n            <div v-for=\"product in products\" :key=\"product.id\" class=\"product-item d-flex align-items-center mb-2\">\r\n              <img :src=\"product.image\" alt=\"Product\" class=\"me-2\" style=\"width: 40px; height: 40px;\">\r\n              <div>\r\n                <p class=\"mb-1\">{{ product.name }}</p>\r\n                <span class=\"text-muted\">{{ product.price }}</span>\r\n              </div>\r\n              <button class=\"btn btn-outline-primary btn-sm\" style=\"border-radius: 20px;\"\r\n                      @click=\"sendProductLink(product)\">发送宝贝链接\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <RightWidgetComponent/>\r\n  <FooterComponent ref=\"footer\" @initUserChat=\"handleInitChat\"></FooterComponent>\r\n</template>\r\n\r\n<script setup>\r\nimport {computed, nextTick, onMounted, ref} from 'vue';\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport useUser from \"@/composables/useUser\";\r\nimport axios from \"axios\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport 'emoji-picker-element';\r\nimport html2canvas from 'html2canvas';\r\nimport VueCropper from 'vue-cropperjs';\r\nimport 'cropperjs/dist/cropper.css';\r\n\r\nconst {UserInfoForm, initUserSession} = useUser();\r\nconst footer = ref(null);\r\nconst contacts = ref([]);\r\n\r\nasync function initContacts() {\r\n  try {\r\n    const response = await axios.post('/api/chat/getChatSession', {\r\n      userId: UserInfoForm.value.id\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data !== null)\r\n      contacts.value = response.data;\r\n  } catch (err) {\r\n    ElMessage.error('获取聊天列表失败，请稍后再试')\r\n  }\r\n}\r\n\r\nasync function IsInChatSession() {\r\n  const shopId = new URLSearchParams(window.location.search).get('id');\r\n  if (shopId) {\r\n    const contactExists = ref(false);\r\n    if (Array.isArray(contacts.value) && contacts.value.length > 0) {\r\n      contacts.value.forEach(contact => {\r\n        if (contact.id === parseInt(shopId)) {\r\n          contactExists.value = true;\r\n        }\r\n      });\r\n    }\r\n    if (!contactExists.value) {\r\n      try {\r\n        const response = await axios.post('/api/chat/createChatSession', {\r\n          userId: UserInfoForm.value.id,\r\n          shopId: parseInt(shopId)\r\n        }, {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          withCredentials: true\r\n        });\r\n        if (response.data.code === 200) {\r\n          await initContacts();\r\n        } else {\r\n          ElMessage.error('获取聊天列表失败，请稍后再试')\r\n        }\r\n      } catch (err) {\r\n        ElMessage.error('获取聊天列表失败，请稍后再试')\r\n      }\r\n    }\r\n    contacts.value = contacts.value.map(contact => {\r\n      if (contact.id === parseInt(shopId)) {\r\n        selectedContact.value = contact;\r\n      }\r\n      return contact;\r\n    });\r\n    // 切换到指定联系人，并展示聊天窗口\r\n    selectedContactIndex.value = contacts.value.findIndex(contact => contact.id === parseInt(shopId));\r\n    await selectContact(selectedContactIndex.value);\r\n  }\r\n}\r\n\r\nconst chatData = ref({});\r\n\r\nconst selectedContactIndex = ref(null);\r\nconst newMessage = ref('');\r\n\r\nconst selectedContact = computed(() => {\r\n  return selectedContactIndex.value !== null ? contacts.value[selectedContactIndex.value] : null;\r\n});\r\n\r\nasync function selectContact(index) {\r\n  selectedContactIndex.value = index;\r\n  try {\r\n    const response = await axios.post('/api/chat/getChatDetail', {\r\n      userId: UserInfoForm.value.id,\r\n      shopId: contacts.value[index].id\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data !== null) {\r\n      const chatId = Object.keys(response.data)[0];\r\n      chatData.value[chatId] = response.data[chatId].map(msg => ({\r\n        content: msg.content,\r\n        isSelf: msg.isSelf,\r\n        isRead: msg.isRead,\r\n        contentType: msg.contentType\r\n      }));\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('获取聊天详情失败，请稍后再试')\r\n  }\r\n  await getProducts();\r\n}\r\n\r\nasync function handleInitChat(chatId) {\r\n  if (chatId) {\r\n    selectedContactIndex.value = contacts.value.findIndex(contact => contact.id === parseInt(chatId));\r\n    await selectContact(selectedContactIndex.value);\r\n    await initContacts();\r\n  }\r\n}\r\n\r\nasync function deleteContact(index) {\r\n  const contactId = contacts.value[index].id;\r\n  try {\r\n    const response = await axios.post('/api/chat/deleteChatSession', {\r\n      userId: UserInfoForm.value.id,\r\n      shopId: contactId\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      delete chatData.value[contactId];\r\n      if (selectedContactIndex.value === index) {\r\n        selectedContactIndex.value = null;\r\n      }\r\n      await initContacts();\r\n    } else if (response.data.code === 400)\r\n      ElMessage.error('删除联系人失败，请稍后再试')\r\n  } catch (error) {\r\n    ElMessage.error('删除联系人失败，请稍后再试')\r\n  }\r\n}\r\n\r\nconst chatWindowRef = ref(null);\r\nconst showEmojiPicker = ref(false);\r\n\r\nconst toggleEmojiPicker = () => {\r\n  showEmojiPicker.value = !showEmojiPicker.value;\r\n};\r\n\r\nconst addEmoji = (event) => {\r\n  newMessage.value += event.detail.unicode;\r\n};\r\n\r\nasync function uploadImage(file) {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('userId', UserInfoForm.value.id);\r\n    formData.append('shopId', selectedContact.value.id);\r\n    const response = await axios.post('/api/chat/uploadImage', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      await initContacts();\r\n      await selectContact(selectedContactIndex.value);\r\n      await nextTick(() => {\r\n        const chatWindow = chatWindowRef.value;\r\n        if (chatWindow) {\r\n          chatWindow.scrollTop = chatWindow.scrollHeight;\r\n        }\r\n      });\r\n    } else\r\n      ElMessage.error('上传图片失败，请稍后再试')\r\n  } catch (err) {\r\n    ElMessage.error('上传图片失败，请稍后再试')\r\n  }\r\n}\r\n\r\nconst beforeUpload = async (file) => {\r\n  const isImage = file.type.startsWith('image/');\r\n  if (!isImage) {\r\n    ElMessage.error('请选择图片文件！');\r\n    return;\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;  // 限制文件大小为 2MB\r\n  if (!isLt2M) {\r\n    ElMessage.error('图片大小不能超过 2MB！');\r\n    return;\r\n  }\r\n  await uploadImage(file);\r\n};\r\n\r\nconst cropper = ref(null);\r\nconst imageSrc = ref(null);\r\nconst dialogVisible = ref(false);\r\n\r\nconst takeScreenshot = () => {\r\n  dialogVisible.value = true;\r\n  const element = document.body;\r\n  html2canvas(element).then(canvas => {\r\n    imageSrc.value = canvas.toDataURL('image/png');\r\n  });\r\n};\r\n\r\nasync function cropImage() {\r\n  const canvas = cropper.value.getCroppedCanvas();\r\n  const dataUrl = canvas.toDataURL('image/png');\r\n  const file = dataUrlToFile(dataUrl);\r\n  await uploadImage(file)\r\n  handleClose();\r\n}\r\n\r\nconst dataUrlToFile = (dataUrl) => {\r\n  const arr = dataUrl.split(',');\r\n  const mime = arr[0].match(/:(.*?);/)[1];\r\n  const bstr = atob(arr[1]);\r\n  let n = bstr.length;\r\n  const u8arr = new Uint8Array(n);\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n  return new File([u8arr], 'cropped-image.png', {type: mime});\r\n};\r\n\r\nconst handleClose = () => {\r\n  dialogVisible.value = false;\r\n  imageSrc.value = '';\r\n};\r\n\r\nasync function send() {\r\n  if (newMessage.value.trim() === '') return;\r\n  try {\r\n    const response = await axios.post('/api/chat/sendMessage', {\r\n      userId: UserInfoForm.value.id,\r\n      shopId: selectedContact.value.id,\r\n      message: newMessage.value\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      await selectContact(selectedContactIndex.value);\r\n      await initContacts();\r\n      newMessage.value = '';\r\n      await nextTick(() => {\r\n        const chatWindow = chatWindowRef.value;\r\n        if (chatWindow) {\r\n          chatWindow.scrollTop = chatWindow.scrollHeight;\r\n        }\r\n      });\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error('发送消息失败，请稍后再试')\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('发送消息失败，请稍后再试')\r\n  }\r\n}\r\n\r\nconst products = ref([]);\r\n\r\nasync function getProducts() {\r\n  try {\r\n    const response = await axios.post('/api/pay/chat/getChatOrderList', {\r\n      userId: UserInfoForm.value.id,\r\n      shopId: selectedContact.value.id\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data !== null)\r\n      products.value = response.data;\r\n  } catch (err) {\r\n    ElMessage.error('获取商品列表失败，请稍后再试')\r\n  }\r\n}\r\n\r\nasync function sendProductLink(product) {\r\n  const link = {\r\n    image: product.image,\r\n    price: product.price,\r\n    name: product.name,\r\n    id: product.id\r\n  };\r\n  try {\r\n    const response = await axios.post('/api/chat/sendOrderLink', {\r\n      userId: UserInfoForm.value.id,\r\n      shopId: selectedContact.value.id,\r\n      link: JSON.stringify(link)\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      await selectContact(selectedContactIndex.value);\r\n      await initContacts();\r\n      await nextTick(() => {\r\n        const chatWindow = chatWindowRef.value;\r\n        if (chatWindow) {\r\n          chatWindow.scrollTop = chatWindow.scrollHeight;\r\n        }\r\n      });\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error('发送商品链接失败，请稍后再试')\r\n    }\r\n  } catch (err) {\r\n    ElMessage.error('发送商品链接失败，请稍后再试')\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  await initContacts();\r\n  await IsInChatSession();\r\n});\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.sidebar {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.nav-link {\r\n  color: #495057;\r\n\r\n  &:hover {\r\n    background-color: #96CDCD;\r\n    color: #e9ecef;\r\n  }\r\n\r\n  &.active {\r\n    background-color: #e9ecef;\r\n    color: #96CDCD;\r\n  }\r\n}\r\n\r\n.main-content {\r\n  font-size: 16px;\r\n  background-color: #f1f1f1;\r\n  margin-top: 5vh;\r\n}\r\n\r\n.chat-container {\r\n  height: 100%;\r\n}\r\n\r\n.contact-list {\r\n  overflow-y: auto;\r\n}\r\n\r\n.chat-section {\r\n  overflow-y: auto;\r\n}\r\n\r\n.additional-info {\r\n  overflow-y: auto;\r\n}\r\n\r\n.input-group {\r\n  position: sticky;\r\n  bottom: 0;\r\n}\r\n\r\n.input-toolbar {\r\n  color: #495057;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007bff;\r\n  border-color: #007bff;\r\n}\r\n\r\np.text-secondary {\r\n  margin: 0;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.badge.bg-danger {\r\n  padding: 4px 8px;\r\n  font-size: 0.75em;\r\n}\r\n\r\n.chat-list {\r\n  width: 25%;\r\n}\r\n\r\n.chat-section {\r\n  width: 75%;\r\n}\r\n\r\n.active {\r\n  background-color: #e9ecef;\r\n  cursor: pointer;\r\n}\r\n\r\n.message-item.other {\r\n  background-color: #e9ecef;\r\n  text-align: left;\r\n}\r\n\r\n.message-item.self {\r\n  background-color: #dcf8c6;\r\n  text-align: right;\r\n}\r\n\r\n.message {\r\n  display: flex;\r\n  align-items: flex-start; /* 消息和头像垂直对齐 */\r\n  margin-bottom: 10px;\r\n\r\n  &.self {\r\n    flex-direction: row-reverse; /* 商家消息右侧显示 */\r\n  }\r\n\r\n  .avatar {\r\n    margin: 0 10px; /* 调整头像和消息的间距 */\r\n  }\r\n\r\n  .message-content {\r\n    padding: 10px;\r\n    border-radius: 8px;\r\n    max-width: 60%;\r\n    background: #e9ecef; /* 默认背景色 */\r\n  }\r\n\r\n  &.self .message-content {\r\n    background: #d4edda; /* 商家消息背景色 */\r\n    color: #155724; /* 商家消息文本颜色 */\r\n  }\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.message-status {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 4px;\r\n  padding: 5px;\r\n}\r\n\r\n.read-status {\r\n  color: #67C23A; /* 已读状态颜色 */\r\n}\r\n\r\n.unread-status {\r\n  color: #F56C6C; /* 未读状态颜色 */\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}