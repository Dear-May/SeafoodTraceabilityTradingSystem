{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"d-flex\",\n  style: {\n    \"height\": \"100vh\",\n    \"overflow\": \"hidden\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"bg-dark text-light\",\n  style: {\n    \"width\": \"200px\",\n    \"padding-top\": \"20px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"flex-grow-1 overflow-auto\",\n  style: {\n    \"background\": \"#f5f7fa\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"p-4\"\n};\nconst _hoisted_5 = {\n  class: \"text-center mb-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n  const _component_el_sub_menu = _resolveComponent(\"el-sub-menu\");\n  const _component_el_menu = _resolveComponent(\"el-menu\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"aside\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"text-center mb-4\"\n  }, [_createElementVNode(\"a\", {\n    style: {\n      \"font-size\": \"16px\",\n      \"font-weight\": \"bold\"\n    }\n  }, \"后台管理\")], -1 /* HOISTED */)), _createVNode(_component_el_menu, {\n    \"default-openeds\": ['1'],\n    \"default-active\": '1-2',\n    class: \"border-0\",\n    \"text-color\": \"#fff\",\n    \"active-text-color\": \"#ffd04b\",\n    \"background-color\": \"#333\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_sub_menu, {\n      index: \"1\"\n    }, {\n      title: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"首页\")])),\n      default: _withCtx(() => [_createVNode(_component_el_menu_item, {\n        index: \"1-1\",\n        onClick: _cache[0] || (_cache[0] = $event => $setup.router.push('/admin/index?id=' + $setup.id))\n      }, {\n        default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"首页\")])),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_menu_item, {\n        index: \"1-2\"\n      }, {\n        default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"搜索引擎商品数据同步\")])),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"nav\", {\n    class: \"navbar navbar-light bg-white border-bottom shadow-sm\"\n  }, [_createElementVNode(\"div\", {\n    class: \"container-fluid\"\n  }, [_createElementVNode(\"span\", {\n    class: \"navbar-brand mb-0 h1\"\n  }, \"数据同步\")])], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"搜索引擎商品数据同步\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.syncData\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 同步数据\")])),\n    _: 1 /* STABLE */\n  })])])])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_menu","default","_withCtx","_component_el_sub_menu","index","title","_cache","_createTextVNode","_component_el_menu_item","onClick","$event","$setup","router","push","id","_","_hoisted_3","_hoisted_4","_hoisted_5","_component_el_button","type","syncData"],"sources":["D:\\Cache\\Java\\shopping\\shoppping_c_frontend\\src\\views\\Admin\\AdminSyncView.vue"],"sourcesContent":["<template>\r\n  <div class=\"d-flex\" style=\"height: 100vh; overflow: hidden;\">\r\n    <aside class=\"bg-dark text-light\" style=\"width: 200px; padding-top: 20px;\">\r\n      <div class=\"text-center mb-4\">\r\n        <a style=\"font-size: 16px; font-weight: bold\">后台管理</a>\r\n      </div>\r\n      <el-menu\r\n          :default-openeds=\"['1']\"\r\n          :default-active=\"'1-2'\"\r\n          class=\"border-0\"\r\n          text-color=\"#fff\"\r\n          active-text-color=\"#ffd04b\"\r\n          background-color=\"#333\"\r\n      >\r\n        <el-sub-menu index=\"1\">\r\n          <template #title>首页</template>\r\n          <el-menu-item index=\"1-1\" @click=\"router.push('/admin/index?id='+id)\">首页</el-menu-item>\r\n          <el-menu-item index=\"1-2\">搜索引擎商品数据同步</el-menu-item>\r\n        </el-sub-menu>\r\n      </el-menu>\r\n    </aside>\r\n\r\n    <div class=\"flex-grow-1 overflow-auto\" style=\"background: #f5f7fa;\">\r\n      <nav class=\"navbar navbar-light bg-white border-bottom shadow-sm\">\r\n        <div class=\"container-fluid\">\r\n          <span class=\"navbar-brand mb-0 h1\">数据同步</span>\r\n        </div>\r\n      </nav>\r\n\r\n      <div class=\"p-4\">\r\n        <div class=\"text-center mb-4\">\r\n          <h2>搜索引擎商品数据同步</h2>\r\n          <el-button type=\"primary\" @click=\"syncData\"> 同步数据</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport router from \"@/router\";\r\nimport {onMounted} from \"vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport axios from \"axios\";\r\n\r\nlet id = null;\r\n\r\nasync function checkUserPermission() {\r\n  id = new URLSearchParams(window.location.search).get('id');\r\n  if (!id) {\r\n    ElMessage.error('权限校验失败');\r\n    await router.replace('/')\r\n  } else {\r\n    try {\r\n      const response = await axios.post('/api/admin/checkUserPermission', {\r\n        id: id,\r\n      }, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        withCredentials: true\r\n      });\r\n      if (response.data.code !== 200) {\r\n        ElMessage.error('无权限访问')\r\n        await router.replace('/')\r\n      }\r\n    } catch (error) {\r\n      ElMessage.error('获取权限失败')\r\n      await router.replace('/')\r\n    }\r\n  }\r\n}\r\n\r\nasync function syncData() {\r\n  try {\r\n    const response = await axios.post('/api/admin/syncGoodData', {\r\n      token: id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      ElMessage.success('同步成功')\r\n    } else {\r\n      ElMessage.error('同步失败1')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('同步失败')\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await checkUserPermission();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC,QAAQ;EAACC,KAAwC,EAAxC;IAAA;IAAA;EAAA;;;EACXD,KAAK,EAAC,oBAAoB;EAACC,KAAwC,EAAxC;IAAA;IAAA;EAAA;;;EAoB7BD,KAAK,EAAC,2BAA2B;EAACC,KAA4B,EAA5B;IAAA;EAAA;;;EAOhCD,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAkB;;;;;;uBA7BnCE,mBAAA,CAmCM,OAnCNC,UAmCM,GAlCJC,mBAAA,CAkBQ,SAlBRC,UAkBQ,G,0BAjBND,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAkB,IAC3BI,mBAAA,CAAsD;IAAnDH,KAA0C,EAA1C;MAAA;MAAA;IAAA;EAA0C,GAAC,MAAI,E,sBAEpDK,YAAA,CAaUC,kBAAA;IAZL,iBAAe,EAAE,KAAK;IACtB,gBAAc,EAAE,KAAK;IACtBP,KAAK,EAAC,UAAU;IAChB,YAAU,EAAC,MAAM;IACjB,mBAAiB,EAAC,SAAS;IAC3B,kBAAgB,EAAC;;IAZ3BQ,OAAA,EAAAC,QAAA,CAcQ,MAIc,CAJdH,YAAA,CAIcI,sBAAA;MAJDC,KAAK,EAAC;IAAG;MACTC,KAAK,EAAAH,QAAA,CAAC,MAAEI,MAAA,QAAAA,MAAA,OAf7BC,gBAAA,CAe2B,IAAE,E;MAf7BN,OAAA,EAAAC,QAAA,CAgBU,MAAuF,CAAvFH,YAAA,CAAuFS,uBAAA;QAAzEJ,KAAK,EAAC,KAAK;QAAEK,OAAK,EAAAH,MAAA,QAAAA,MAAA,MAAAI,MAAA,IAAEC,MAAA,CAAAC,MAAM,CAACC,IAAI,sBAAoBF,MAAA,CAAAG,EAAE;;QAhB7Eb,OAAA,EAAAC,QAAA,CAgBgF,MAAEI,MAAA,QAAAA,MAAA,OAhBlFC,gBAAA,CAgBgF,IAAE,E;QAhBlFQ,CAAA;UAiBUhB,YAAA,CAAmDS,uBAAA;QAArCJ,KAAK,EAAC;MAAK;QAjBnCH,OAAA,EAAAC,QAAA,CAiBoC,MAAUI,MAAA,QAAAA,MAAA,OAjB9CC,gBAAA,CAiBoC,YAAU,E;QAjB9CQ,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;QAsBIlB,mBAAA,CAaM,OAbNmB,UAaM,G,0BAZJnB,mBAAA,CAIM;IAJDJ,KAAK,EAAC;EAAsD,IAC/DI,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAiB,IAC1BI,mBAAA,CAA8C;IAAxCJ,KAAK,EAAC;EAAsB,GAAC,MAAI,E,wBAI3CI,mBAAA,CAKM,OALNoB,UAKM,GAJJpB,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFJrB,mBAAA,CAAmB,YAAf,YAAU,sBACdE,YAAA,CAA6DoB,oBAAA;IAAlDC,IAAI,EAAC,SAAS;IAAEX,OAAK,EAAEE,MAAA,CAAAU;;IAhC5CpB,OAAA,EAAAC,QAAA,CAgCsD,MAAKI,MAAA,QAAAA,MAAA,OAhC3DC,gBAAA,CAgCsD,OAAK,E;IAhC3DQ,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}