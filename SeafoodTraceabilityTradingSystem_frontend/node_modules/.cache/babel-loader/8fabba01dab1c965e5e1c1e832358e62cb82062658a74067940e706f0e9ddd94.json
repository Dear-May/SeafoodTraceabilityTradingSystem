{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\nimport FooterComponent from \"@/components/FooterComponent.vue\";\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\nimport { onMounted, ref } from \"vue\";\nimport SidebarComponent from \"@/components/SidebarComponent.vue\";\nimport router from \"@/router\";\nimport { ElMessage } from \"element-plus\";\nimport axios from \"axios\";\nimport useUser from \"@/composables/useUser\";\nexport default {\n  __name: 'BucketView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const sidebarComponent = ref(null);\n    const {\n      UserInfoForm,\n      initUserSession\n    } = useUser();\n    function initSidebar() {\n      sidebarComponent.value.setActive(2);\n    }\n    const storeData = ref([]);\n    const isAllSelected = ref(false);\n    async function initData() {\n      try {\n        const response = await axios.post('/api/good/getCartList', {\n          userId: UserInfoForm.value.id\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data !== null) {\n          storeData.value = response.data; // 结构为数组\n        }\n      } catch (error) {\n        ElMessage.error(\"获取购物车数据失败\");\n      }\n    }\n    function totalQuantity() {\n      let uniqueProducts = new Set();\n      storeData.value.forEach(store => {\n        store.goods.forEach(product => {\n          uniqueProducts.add(product.specId); // 使用商品ID来计算种类\n        });\n      });\n      return uniqueProducts.size; // 返回不同商品的数量\n    }\n    function handleToChat(shopId) {\n      router.push('/talkToStore?id=' + shopId);\n    }\n    function handleShop(id) {\n      router.push('/shop?shopId=' + id);\n    }\n    function handleToProductDetail(goodId) {\n      router.push('/goodDetail?id=' + goodId);\n    }\n    async function handleQuantityChange(goodId, specId, specNumber) {\n      try {\n        const response = await axios.post('/api/good/updateGoodCart', {\n          userId: UserInfoForm.value.id,\n          goodId: goodId,\n          specId: specId,\n          number: specNumber\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 200) {\n          await initData(); // 更新购物车数据\n          selectedList.value = selectedList.value.filter(item => item.specId !== specId);\n        } else if (response.data.code === 400) {\n          ElMessage.error(\"修改购物车数据失败\");\n        }\n      } catch (error) {\n        ElMessage.error(\"修改购物车数据失败\");\n      }\n    }\n    const selectedList = ref([]);\n    function toggleSelectAll() {\n      storeData.value.forEach(store => {\n        store.goods.forEach(product => {\n          product.goodSelected = isAllSelected.value; // 指向正确的属性\n          if (product.goodSelected) {\n            addToSelectedList(product); // 添加到选中列表\n          } else {\n            removeFromSelectedList(product); // 从选中列表中移除\n          }\n        });\n        store.shopSelect = isAllSelected.value; // 更新商店的选中状态\n      });\n    }\n    function toggleSelectShop(store) {\n      store.goods.forEach(product => {\n        product.goodSelected = store.shopSelect;\n        if (product.goodSelected) {\n          addToSelectedList(product); // 添加到选中列表\n        } else {\n          removeFromSelectedList(product); // 从选中列表中移除\n        }\n      });\n      updateSelectStatus();\n    }\n    function toggleSelect(product) {\n      if (!product.goodSelected && isAllSelected.value) {\n        isAllSelected.value = false; // 取消全选状态\n      }\n      if (product.goodSelected) {\n        addToSelectedList(product); // 添加到选中列表\n      } else {\n        removeFromSelectedList(product); // 从选中列表中移除\n      }\n      updateSelectStatus();\n      updateShopSelectStatus(product);\n    }\n    function addToSelectedList(product) {\n      if (!selectedList.value.includes(product)) {\n        selectedList.value.push(product);\n      }\n    }\n    function removeFromSelectedList(product) {\n      const index = selectedList.value.indexOf(product);\n      if (index > -1) {\n        selectedList.value.splice(index, 1);\n      }\n    }\n    function updateSelectStatus() {\n      isAllSelected.value = storeData.value.every(store => store.goods.every(product => product.goodSelected));\n    }\n    function updateShopSelectStatus(product) {\n      // 找到该商品所属的商店\n      const store = storeData.value.find(shop => shop.goods.some(p => p.specId === product.specId));\n\n      // 检查该商店的所有商品选中状态\n      if (store) {\n        store.shopSelect = store.goods.every(p => p.goodSelected); // 根据商品状态更新商店的选中状态\n      }\n    }\n    const specList = ref([]);\n    const selectedSpecImage = ref();\n    const selectedSpecName = ref();\n    const selectedSpecPrice = ref();\n    const selectedSpecId = ref();\n    async function getSpecList(goodId) {\n      try {\n        const response = await axios.post('/api/good/getSpecList', {\n          goodId: goodId\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data !== null) {\n          return response.data;\n        } else ElMessage.error(\"获取商品规格失败\");\n      } catch (error) {\n        ElMessage.error(\"获取商品规格失败\");\n      }\n    }\n    async function handleProductSpecDetail(product) {\n      product.showDetails = !product.showDetails;\n      if (product.showDetails) {\n        selectedSpecImage.value = product.specImage;\n        selectedSpecId.value = product.specId;\n        selectedSpecName.value = product.specName;\n        selectedSpecPrice.value = product.specPrice;\n        specList.value = await getSpecList(product.goodId);\n      }\n    }\n    function selectSpecification(spec) {\n      selectedSpecName.value = spec.specName;\n      selectedSpecPrice.value = spec.price;\n      selectedSpecId.value = spec.specificationID;\n      selectedSpecImage.value = spec.showurl;\n    }\n    const rightWidget = ref(null);\n    async function updateProductSpec(product) {\n      try {\n        const response = await axios.post('/api/good/updateGoodCartSpec', {\n          userId: UserInfoForm.value.id,\n          goodId: product.goodId,\n          oldSpecId: product.specId,\n          newSpecId: selectedSpecId.value\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 400) ElMessage.error(\"修改购物车数据失败\");else {\n          await initData();\n          await rightWidget.value.getCartCount();\n          selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\n        }\n      } catch (error) {\n        ElMessage.error(\"修改购物车数据失败\");\n      }\n    }\n    async function moveToFavorite(product) {\n      try {\n        const response = await axios.post('/api/good/moveToFavorite', {\n          userId: UserInfoForm.value.id,\n          goodId: product.goodId,\n          specId: product.specId\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 200) {\n          await initData();\n          await rightWidget.value.getCartCount();\n          selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\n        } else if (response.data.code === 400) {\n          ElMessage.error(\"移入收藏失败\");\n        }\n      } catch (error) {\n        ElMessage.error(\"移入收藏失败\");\n      }\n    }\n    async function deleteItem(product) {\n      try {\n        const response = await axios.post('/api/good/deleteGoodCart', {\n          userId: UserInfoForm.value.id,\n          goodId: product.goodId,\n          specId: product.specId\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data.code === 200) {\n          await initData();\n          await rightWidget.value.getCartCount();\n          selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\n        } else if (response.data.code === 400) {\n          ElMessage.error(\"删除失败\");\n        }\n      } catch (error) {\n        ElMessage.error(\"删除失败\");\n      }\n    }\n    async function moveToFavoriteList() {\n      for (const item of selectedList.value) {\n        await moveToFavorite(item);\n      }\n      selectedList.value = [];\n    }\n    async function deleteSelected() {\n      for (const item of selectedList.value) {\n        await deleteItem(item);\n      }\n      selectedList.value = [];\n    }\n    function deselectionItem(item) {\n      item.goodSelected = false;\n      removeFromSelectedList(item);\n      updateSelectStatus();\n      updateShopSelectStatus(item);\n    }\n    function totalPrice() {\n      let total = 0;\n      selectedList.value.forEach(product => {\n        total += product.specPrice * product.specNumber;\n      });\n      return total.toFixed(2);\n    }\n    async function storePayGoods() {\n      try {\n        const response = await axios.post('/api/pay/storePayGoods', {\n          bucket_buy: selectedList.value,\n          user_id: UserInfoForm.value.id\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        });\n        if (response.data === \"fail\") {\n          ElMessage.error(\"提交订单失败\");\n        } else await router.push('/payGoods/ready?token=' + response.data);\n      } catch (error) {\n        ElMessage.error(\"提交订单失败\");\n      }\n    }\n    async function Checkout() {\n      if (selectedList.value.length === 0) {\n        ElMessage.error(\"请选择商品\");\n      } else {\n        await storePayGoods();\n      }\n    }\n    onMounted(async () => {\n      initUserSession();\n      initSidebar();\n      await initData();\n    });\n    const __returned__ = {\n      sidebarComponent,\n      UserInfoForm,\n      initUserSession,\n      initSidebar,\n      storeData,\n      isAllSelected,\n      initData,\n      totalQuantity,\n      handleToChat,\n      handleShop,\n      handleToProductDetail,\n      handleQuantityChange,\n      selectedList,\n      toggleSelectAll,\n      toggleSelectShop,\n      toggleSelect,\n      addToSelectedList,\n      removeFromSelectedList,\n      updateSelectStatus,\n      updateShopSelectStatus,\n      specList,\n      selectedSpecImage,\n      selectedSpecName,\n      selectedSpecPrice,\n      selectedSpecId,\n      getSpecList,\n      handleProductSpecDetail,\n      selectSpecification,\n      rightWidget,\n      updateProductSpec,\n      moveToFavorite,\n      deleteItem,\n      moveToFavoriteList,\n      deleteSelected,\n      deselectionItem,\n      totalPrice,\n      storePayGoods,\n      Checkout,\n      HeaderComponent,\n      FooterComponent,\n      RightWidgetComponent,\n      onMounted,\n      ref,\n      SidebarComponent,\n      get router() {\n        return router;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get axios() {\n        return axios;\n      },\n      get useUser() {\n        return useUser;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["HeaderComponent","FooterComponent","RightWidgetComponent","onMounted","ref","SidebarComponent","router","ElMessage","axios","useUser","sidebarComponent","UserInfoForm","initUserSession","initSidebar","value","setActive","storeData","isAllSelected","initData","response","post","userId","id","headers","withCredentials","data","error","totalQuantity","uniqueProducts","Set","forEach","store","goods","product","add","specId","size","handleToChat","shopId","push","handleShop","handleToProductDetail","goodId","handleQuantityChange","specNumber","number","code","selectedList","filter","item","toggleSelectAll","goodSelected","addToSelectedList","removeFromSelectedList","shopSelect","toggleSelectShop","updateSelectStatus","toggleSelect","updateShopSelectStatus","includes","index","indexOf","splice","every","find","shop","some","p","specList","selectedSpecImage","selectedSpecName","selectedSpecPrice","selectedSpecId","getSpecList","handleProductSpecDetail","showDetails","specImage","specName","specPrice","selectSpecification","spec","price","specificationID","showurl","rightWidget","updateProductSpec","oldSpecId","newSpecId","getCartCount","moveToFavorite","deleteItem","moveToFavoriteList","deleteSelected","deselectionItem","totalPrice","total","toFixed","storePayGoods","bucket_buy","user_id","Checkout","length"],"sources":["D:/Cache/Java/shopping/shoppping_c_frontend/src/views/BucketView.vue"],"sourcesContent":["<template>\r\n  <div class=\"my-haichao-page\">\r\n    <HeaderComponent/>\r\n    <SidebarComponent ref=\"sidebarComponent\"/>\r\n\r\n    <div class=\"main-content row\">\r\n      <div class=\"col-9\">\r\n        <h3 class=\"title\">购物车</h3>\r\n        <div class=\"cart-summary\">\r\n          <div class=\"cart-summary-info\">\r\n            <span class=\"cart-summary-title\">全部商品（{{ totalQuantity() }}）</span>\r\n          </div>\r\n          <div class=\"cart-summary-actions\">\r\n            <el-checkbox style=\"margin-right: 10px;\" v-model=\"isAllSelected\" @change=\"toggleSelectAll\"></el-checkbox>\r\n            <span class=\"select-all-text\">全选</span>\r\n            <button class=\"move-to-favorite-btn\" @click=\"moveToFavoriteList\">移入收藏</button>\r\n            <button class=\"delete-selected-btn\" @click=\"deleteSelected\">删除</button>\r\n          </div>\r\n        </div>\r\n        <div v-for=\"(store) in storeData\" :key=\"store.shopName\" class=\"cart-item\">\r\n          <div class=\"store-info\">\r\n            <el-checkbox size=\"large\" v-model=\"store.shopSelect\" @change=\"toggleSelectShop(store)\">\r\n              <span class=\"store-name\" @click=\"handleShop(store.shopId)\">{{ store.shopName }}\r\n                <a class=\"bi bi-chat shake-animation\" style=\"margin-left: 10px; color: #ff5000;\"\r\n                   @click=\"handleToChat(store.shopId)\"></a>\r\n              </span>\r\n            </el-checkbox>\r\n          </div>\r\n\r\n          <div class=\"product-list\">\r\n            <div v-for=\"(product) in store.goods\" :key=\"product.specId\" class=\"product-item\">\r\n              <el-checkbox style=\"margin-right: 10px;\" v-model=\"product.goodSelected\"\r\n                           @change=\"toggleSelect(product)\"></el-checkbox>\r\n              <div class=\"product\">\r\n                <img class=\"product-image\" :src=\"product.specImage\" alt=\"商品图片\"/>\r\n                <div class=\"large-image\">\r\n                  <img :src=\"product.specImage\" alt=\"放大商品图片\"/>\r\n                </div>\r\n              </div>\r\n              <div class=\"product-details\">\r\n                <div class=\"product-name-and-attributes\">\r\n                  <div class=\"product-name\" @click=\"handleToProductDetail(product.goodId)\">\r\n                    {{ product.goodName }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"product-spec\">\r\n                <div class=\"product-attributes\" :class=\"{active: product.showDetails}\"\r\n                     @click=\"handleProductSpecDetail(product)\">\r\n                  <div class=\"edit-label\">修改</div>\r\n                  规格: {{ product.specName }}\r\n                </div>\r\n                <div class=\"product-spec-details\" v-if=\"product.showDetails\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-4\">\r\n                      <img :src=\"selectedSpecImage\" alt=\"商品图片\" width=\"150px\" height=\"150px\"/>\r\n                    </div>\r\n                    <div class=\"col-8\">\r\n                      <div class=\"product-name\" style=\"text-align: start; padding: 10px;\">\r\n                        已选：{{ selectedSpecName }}\r\n                      </div>\r\n                      <div\r\n                          style=\"text-align: left; padding-left: 10px; font-size: 20px; color: #ff5000; font-weight: bold;\">\r\n                        价格: ¥ {{ selectedSpecPrice }}\r\n                      </div>\r\n                      <el-divider style=\"padding: 0 30px;\"></el-divider>\r\n                      <div class=\"row\">\r\n                        <div class=\"col-3\">\r\n                          <span style=\"text-align: right;\">规格分类</span>\r\n                        </div>\r\n                        <div class=\"col-9\" style=\"text-align: left;\">\r\n                          <el-button v-for=\"spec in specList\" :key=\"spec.specificationID\"\r\n                                     :class=\"{'active': spec.specificationID === selectedSpecId}\"\r\n                                     style=\"padding: 0 5px; margin-right: 5px;\"\r\n                                     @click=\"selectSpecification(spec)\">\r\n                            <img :src=\"spec.showurl\" width=\"30px\" height=\"30px\" alt=\"商品图片\"\r\n                                 style=\"margin-right: 5px\">\r\n                            <span>{{ spec.specName }}</span>\r\n                          </el-button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <el-divider style=\"padding: 0 30px;\"></el-divider>\r\n                  </div>\r\n                  <el-button @click=\"updateProductSpec(product)\" style=\"background-color: #ff5000; color: #fff;\"\r\n                             size=\"large\">确定\r\n                  </el-button>\r\n                  <el-button @click=\" product.showDetails=false\" style=\"background-color: #fff; color: #666;\"\r\n                             size=\"large\">取消\r\n                  </el-button>\r\n                </div>\r\n              </div>\r\n              <div class=\"product-price\">\r\n                <span class=\"price-sale\">¥{{ product.specPrice }}</span>\r\n              </div>\r\n              <div class=\"product-quantity\">\r\n                <el-input-number v-model=\"product.specNumber\" :min=\"1\" :max=\"10\"\r\n                                 style=\"width: 100px;\"\r\n                                 @change=\"handleQuantityChange(product.goodId, product.specId,product.specNumber)\"></el-input-number>\r\n              </div>\r\n              <div class=\"product-actions\">\r\n                <el-button class=\"move-to-favorite\" @click=\"moveToFavorite(product)\">移入收藏</el-button>\r\n                <el-button class=\"delete-item\" @click=\"deleteItem(product)\">删除</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <a style=\"color: #666; text-align: center; font-size: 16px;\">没有更多了</a>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <div class=\"container cart-checkout\">\r\n          <div class=\"title\" style=\"margin-bottom: 40px;\">结算明细</div>\r\n          <div v-if=\"selectedList.length === 0\">\r\n            <img class=\"image\" src=\"@/images/bucket_none.png\" alt=\"购物车图标\">\r\n            <div class=\"message\">选择商品查看实际支付价格</div>\r\n          </div>\r\n          <div class=\"image-container\" v-else>\r\n            <div v-for=\"(item, index) in selectedList\" :key=\"index\" class=\"image-item\">\r\n              <img :src=\"item.specImage\" alt=\"商品图片\" @click=\"deselectionItem(item)\">\r\n              <span class=\"image-caption\">取消选择</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"total\">合计：</div>\r\n          <div class=\"price\">¥ {{ totalPrice() }}</div>\r\n          <button class=\"button\" @click=\"Checkout\">结算</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n  <FooterComponent/>\r\n  <RightWidgetComponent ref=\"rightWidget\"></RightWidgetComponent>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport HeaderComponent from \"@/components/HeaderComponent.vue\";\r\nimport FooterComponent from \"@/components/FooterComponent.vue\";\r\nimport RightWidgetComponent from \"@/components/RightWidgetComponent.vue\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport SidebarComponent from \"@/components/SidebarComponent.vue\";\r\nimport router from \"@/router\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport axios from \"axios\";\r\nimport useUser from \"@/composables/useUser\";\r\n\r\nconst sidebarComponent = ref(null);\r\n\r\nconst {UserInfoForm, initUserSession} = useUser()\r\n\r\nfunction initSidebar() {\r\n  sidebarComponent.value.setActive(2);\r\n}\r\n\r\nconst storeData = ref([]);\r\nconst isAllSelected = ref(false);\r\n\r\nasync function initData() {\r\n  try {\r\n    const response = await axios.post('/api/good/getCartList', {\r\n      userId: UserInfoForm.value.id\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n\r\n    if (response.data !== null) {\r\n      storeData.value = response.data; // 结构为数组\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"获取购物车数据失败\");\r\n  }\r\n}\r\n\r\nfunction totalQuantity() {\r\n  let uniqueProducts = new Set();\r\n  storeData.value.forEach(store => {\r\n    store.goods.forEach(product => {\r\n      uniqueProducts.add(product.specId); // 使用商品ID来计算种类\r\n    });\r\n  });\r\n  return uniqueProducts.size; // 返回不同商品的数量\r\n}\r\n\r\nfunction handleToChat(shopId) {\r\n  router.push('/talkToStore?id=' + shopId);\r\n}\r\n\r\nfunction handleShop(id) {\r\n  router.push('/shop?shopId=' + id);\r\n}\r\n\r\nfunction handleToProductDetail(goodId) {\r\n  router.push('/goodDetail?id=' + goodId);\r\n}\r\n\r\nasync function handleQuantityChange(goodId, specId, specNumber) {\r\n  try {\r\n    const response = await axios.post('/api/good/updateGoodCart', {\r\n      userId: UserInfoForm.value.id,\r\n      goodId: goodId,\r\n      specId: specId,\r\n      number: specNumber\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n\r\n    if (response.data.code === 200) {\r\n      await initData(); // 更新购物车数据\r\n      selectedList.value = selectedList.value.filter(item => item.specId !== specId);\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error(\"修改购物车数据失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"修改购物车数据失败\");\r\n  }\r\n}\r\n\r\nconst selectedList = ref([]);\r\n\r\nfunction toggleSelectAll() {\r\n  storeData.value.forEach(store => {\r\n    store.goods.forEach(product => {\r\n      product.goodSelected = isAllSelected.value; // 指向正确的属性\r\n      if (product.goodSelected) {\r\n        addToSelectedList(product); // 添加到选中列表\r\n      } else {\r\n        removeFromSelectedList(product); // 从选中列表中移除\r\n      }\r\n    });\r\n    store.shopSelect = isAllSelected.value; // 更新商店的选中状态\r\n  });\r\n}\r\n\r\nfunction toggleSelectShop(store) {\r\n  store.goods.forEach(product => {\r\n    product.goodSelected = store.shopSelect;\r\n    if (product.goodSelected) {\r\n      addToSelectedList(product); // 添加到选中列表\r\n    } else {\r\n      removeFromSelectedList(product); // 从选中列表中移除\r\n    }\r\n  });\r\n  updateSelectStatus();\r\n}\r\n\r\nfunction toggleSelect(product) {\r\n  if (!product.goodSelected && isAllSelected.value) {\r\n    isAllSelected.value = false; // 取消全选状态\r\n  }\r\n\r\n  if (product.goodSelected) {\r\n    addToSelectedList(product); // 添加到选中列表\r\n  } else {\r\n    removeFromSelectedList(product); // 从选中列表中移除\r\n  }\r\n  updateSelectStatus();\r\n  updateShopSelectStatus(product);\r\n}\r\n\r\nfunction addToSelectedList(product) {\r\n  if (!selectedList.value.includes(product)) {\r\n    selectedList.value.push(product);\r\n  }\r\n}\r\n\r\nfunction removeFromSelectedList(product) {\r\n  const index = selectedList.value.indexOf(product);\r\n  if (index > -1) {\r\n    selectedList.value.splice(index, 1);\r\n  }\r\n}\r\n\r\nfunction updateSelectStatus() {\r\n  isAllSelected.value = storeData.value.every(store =>\r\n      store.goods.every(product => product.goodSelected)\r\n  );\r\n}\r\n\r\nfunction updateShopSelectStatus(product) {\r\n  // 找到该商品所属的商店\r\n  const store = storeData.value.find(shop =>\r\n      shop.goods.some(p => p.specId === product.specId)\r\n  );\r\n\r\n  // 检查该商店的所有商品选中状态\r\n  if (store) {\r\n    store.shopSelect = store.goods.every(p => p.goodSelected); // 根据商品状态更新商店的选中状态\r\n  }\r\n}\r\n\r\nconst specList = ref([]);\r\nconst selectedSpecImage = ref()\r\nconst selectedSpecName = ref()\r\nconst selectedSpecPrice = ref()\r\nconst selectedSpecId = ref()\r\n\r\nasync function getSpecList(goodId) {\r\n  try {\r\n    const response = await axios.post('/api/good/getSpecList', {\r\n      goodId: goodId\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data !== null) {\r\n      return response.data;\r\n    } else\r\n      ElMessage.error(\"获取商品规格失败\");\r\n  } catch (error) {\r\n    ElMessage.error(\"获取商品规格失败\");\r\n  }\r\n}\r\n\r\nasync function handleProductSpecDetail(product) {\r\n  product.showDetails = !product.showDetails;\r\n  if (product.showDetails) {\r\n    selectedSpecImage.value = product.specImage;\r\n    selectedSpecId.value = product.specId;\r\n    selectedSpecName.value = product.specName;\r\n    selectedSpecPrice.value = product.specPrice;\r\n    specList.value = await getSpecList(product.goodId);\r\n  }\r\n}\r\n\r\nfunction selectSpecification(spec) {\r\n  selectedSpecName.value = spec.specName;\r\n  selectedSpecPrice.value = spec.price;\r\n  selectedSpecId.value = spec.specificationID;\r\n  selectedSpecImage.value = spec.showurl;\r\n}\r\n\r\nconst rightWidget = ref(null);\r\n\r\nasync function updateProductSpec(product) {\r\n  try {\r\n    const response = await axios.post('/api/good/updateGoodCartSpec', {\r\n      userId: UserInfoForm.value.id,\r\n      goodId: product.goodId,\r\n      oldSpecId: product.specId,\r\n      newSpecId: selectedSpecId.value,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 400)\r\n      ElMessage.error(\"修改购物车数据失败\");\r\n    else {\r\n      await initData();\r\n      await rightWidget.value.getCartCount();\r\n      selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"修改购物车数据失败\");\r\n  }\r\n}\r\n\r\nasync function moveToFavorite(product) {\r\n  try {\r\n    const response = await axios.post('/api/good/moveToFavorite', {\r\n      userId: UserInfoForm.value.id,\r\n      goodId: product.goodId,\r\n      specId: product.specId,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      await initData();\r\n      await rightWidget.value.getCartCount();\r\n      selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error(\"移入收藏失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"移入收藏失败\");\r\n  }\r\n}\r\n\r\nasync function deleteItem(product) {\r\n  try {\r\n    const response = await axios.post('/api/good/deleteGoodCart', {\r\n      userId: UserInfoForm.value.id,\r\n      goodId: product.goodId,\r\n      specId: product.specId,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    });\r\n    if (response.data.code === 200) {\r\n      await initData();\r\n      await rightWidget.value.getCartCount();\r\n      selectedList.value = selectedList.value.filter(item => item.specId !== product.specId);\r\n    } else if (response.data.code === 400) {\r\n      ElMessage.error(\"删除失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(\"删除失败\");\r\n  }\r\n}\r\n\r\nasync function moveToFavoriteList() {\r\n  for (const item of selectedList.value) {\r\n    await moveToFavorite(item);\r\n  }\r\n  selectedList.value = [];\r\n}\r\n\r\nasync function deleteSelected() {\r\n  for (const item of selectedList.value) {\r\n    await deleteItem(item);\r\n  }\r\n  selectedList.value = [];\r\n}\r\n\r\nfunction deselectionItem(item) {\r\n  item.goodSelected = false;\r\n  removeFromSelectedList(item);\r\n  updateSelectStatus();\r\n  updateShopSelectStatus(item);\r\n}\r\n\r\nfunction totalPrice() {\r\n  let total = 0;\r\n  selectedList.value.forEach(product => {\r\n    total += product.specPrice * product.specNumber;\r\n  });\r\n  return total.toFixed(2);\r\n}\r\n\r\nasync function storePayGoods() {\r\n  try {\r\n    const response = await axios.post('/api/pay/storePayGoods', {\r\n      bucket_buy: selectedList.value,\r\n      user_id: UserInfoForm.value.id,\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      withCredentials: true\r\n    })\r\n    if (response.data === \"fail\") {\r\n      ElMessage.error(\"提交订单失败\")\r\n    } else\r\n      await router.push('/payGoods/ready?token=' + response.data)\r\n  } catch (error) {\r\n    ElMessage.error(\"提交订单失败\")\r\n  }\r\n}\r\n\r\nasync function Checkout() {\r\n  if (selectedList.value.length === 0) {\r\n    ElMessage.error(\"请选择商品\");\r\n  } else {\r\n    await storePayGoods();\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  initUserSession();\r\n  initSidebar();\r\n  await initData();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.my-haichao-page {\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-family: Arial, sans-serif;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n  margin-top: 90px;\r\n  min-height: calc(100vh - 100px);\r\n}\r\n\r\n.title {\r\n  text-align: start;\r\n  color: #ff5000;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  padding: 20px;\r\n}\r\n\r\n.cart-summary {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n  background-color: #f8f8f8;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n\r\n  .cart-summary-info {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .cart-summary-title {\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n      color: #ff5000;\r\n      margin-right: 20px;\r\n    }\r\n\r\n    .discount-info {\r\n      font-size: 14px;\r\n      color: #ff0000;\r\n    }\r\n  }\r\n\r\n  .cart-summary-actions {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .select-all-checkbox {\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .select-all-text {\r\n      font-size: 14px;\r\n      margin-right: 20px;\r\n    }\r\n\r\n    .move-to-favorite-btn,\r\n    .delete-selected-btn {\r\n      background: none;\r\n      border: 1px solid #ccc;\r\n      padding: 6px 12px;\r\n      margin-right: 10px;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      font-size: 14px;\r\n      color: #333;\r\n\r\n      &:hover {\r\n        background-color: #f0f0f0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.cart-item {\r\n  font-family: Arial, sans-serif;\r\n  padding: 15px;\r\n  border-top: 1px solid #ebebeb;\r\n\r\n  .store-info {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n\r\n    .select-checkbox {\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .store-name {\r\n      font-weight: bold;\r\n      color: #ff5000;\r\n      font-size: 18px;\r\n    }\r\n\r\n    @keyframes shake {\r\n      0% {\r\n        transform: translateY(0);\r\n      }\r\n      25% {\r\n        transform: translateY(-5px);\r\n      }\r\n      50% {\r\n        transform: translateY(0);\r\n      }\r\n      75% {\r\n        transform: translateY(5px);\r\n      }\r\n      100% {\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    .shake-animation {\r\n      display: inline-block; /* 保持元素的行内块布局 */\r\n      animation: shake 1s infinite; /* 动画持续1秒，无限循环 */\r\n    }\r\n  }\r\n\r\n  .product-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n  }\r\n\r\n  .product-item {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    border: none;\r\n    background-color: #fff;\r\n\r\n    .select-checkbox {\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .product {\r\n      position: relative;\r\n      display: inline-block;\r\n    }\r\n\r\n    .large-image {\r\n      display: none;\r\n      position: absolute;\r\n      top: -50px;\r\n      left: 100%;\r\n      width: 200px;\r\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n      border-radius: 10px;\r\n      background-color: white;\r\n      padding: 5px;\r\n    }\r\n\r\n    .product:hover .product-image {\r\n      filter: brightness(60%);\r\n    }\r\n\r\n    .product:hover .large-image {\r\n      display: block;\r\n    }\r\n\r\n    .product-image {\r\n      width: 80px;\r\n      height: 80px;\r\n      object-fit: cover;\r\n      margin-right: 15px;\r\n      border-radius: 5px;\r\n    }\r\n\r\n    .product-details {\r\n      flex: 3;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .product-name-and-attributes {\r\n        display: flex;\r\n        flex-direction: column;\r\n\r\n        .product-name {\r\n          font-size: 16px;\r\n          color: #333;\r\n          font-weight: 500;\r\n          margin-bottom: 5px;\r\n          text-align: start;\r\n        }\r\n\r\n        .product-name:hover {\r\n          color: #e02020;\r\n        }\r\n      }\r\n    }\r\n\r\n    .product-spec {\r\n      position: relative;\r\n      display: inline-block;\r\n\r\n      .product-attributes {\r\n        position: relative;\r\n        margin-left: 40px;\r\n        padding: 20px;\r\n        width: 150px;\r\n        text-align: center;\r\n        border-radius: 5px;\r\n        color: #999;\r\n      }\r\n\r\n      .product-spec-details {\r\n        position: absolute;\r\n        top: 100%;\r\n        left: 0;\r\n        width: 75vh;\r\n        min-height: 30vh;\r\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n        border-radius: 10px;\r\n        background-color: white;\r\n        padding: 5px;\r\n        z-index: 100;\r\n\r\n        .el-button:hover,\r\n        .el-button.active {\r\n          border-color: #e02020;\r\n          color: #e02020;\r\n          background-color: transparent;\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    .edit-label {\r\n      display: none;\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      background-color: #ff5000;\r\n      color: white;\r\n      padding: 5px;\r\n      font-size: 12px;\r\n      border-radius: 0 0 0 5px;\r\n    }\r\n\r\n    .product-attributes:hover, .product-attributes.active {\r\n      border: 1px dashed #ff5000;\r\n    }\r\n\r\n    .product-attributes:hover .edit-label,\r\n    .product-attributes.active .edit-label {\r\n      display: block;\r\n    }\r\n\r\n    .product-price {\r\n      flex: 1;\r\n      text-align: right;\r\n\r\n      .price-sale {\r\n        font-size: 16px;\r\n        color: #ff5000;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .price-original {\r\n        font-size: 14px;\r\n        color: #999;\r\n        text-decoration: line-through;\r\n        margin-left: 8px;\r\n      }\r\n    }\r\n\r\n    .product-quantity {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n\r\n      .quantity-btn {\r\n        background-color: #f5f5f5;\r\n        border: 1px solid #ccc;\r\n        width: 30px;\r\n        height: 30px;\r\n        text-align: center;\r\n        line-height: 28px;\r\n        cursor: pointer;\r\n      }\r\n\r\n      .quantity-input {\r\n        width: 40px;\r\n        height: 30px;\r\n        text-align: center;\r\n        border: 1px solid #ccc;\r\n        margin: 0 5px;\r\n      }\r\n    }\r\n\r\n    .product-actions {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: flex-end;\r\n\r\n      button {\r\n        background: none;\r\n        border: none;\r\n        color: #007bff;\r\n        cursor: pointer;\r\n        margin-bottom: 5px;\r\n\r\n        &:hover {\r\n          text-decoration: underline;\r\n        }\r\n      }\r\n\r\n      .move-to-favorite {\r\n        color: #999;\r\n        text-decoration: none;\r\n      }\r\n\r\n      .delete-item {\r\n        color: #ff5000;\r\n        text-decoration: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@container-width: 340px;\r\n@container-height: 350px;\r\n@border-radius: 10px;\r\n@font-family: Arial, sans-serif;\r\n\r\n.container {\r\n  width: @container-width;\r\n  height: @container-height;\r\n  border: 1px solid #eee;\r\n  border-radius: @border-radius;\r\n  position: fixed;\r\n  margin: 20px auto;\r\n  text-align: center;\r\n  font-family: @font-family;\r\n  overflow: visible;\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 15px;\r\n    font-weight: bold;\r\n    margin-bottom: 10px;\r\n    color: #e02020;\r\n  }\r\n\r\n  .image {\r\n    position: absolute;\r\n    top: 60px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    opacity: 0.5;\r\n  }\r\n\r\n  .message {\r\n    position: absolute;\r\n    top: 170px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    color: #e02020;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .image-container {\r\n    top: 80px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    position: relative;\r\n    z-index: 10;\r\n\r\n    .image-item {\r\n      position: relative;\r\n      display: inline-block;\r\n\r\n      img {\r\n        width: 75px;\r\n        height: 75px;\r\n        border-radius: 10px;\r\n        position: relative;\r\n        cursor: pointer;\r\n        margin-bottom: 10px;\r\n      }\r\n\r\n      .image-caption {\r\n        display: none;\r\n        font-size: 12px;\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        background-color: rgba(0, 0, 0, 0.5); /* 半透明背景 */\r\n        color: white; /* 文字颜色 */\r\n        padding: 5px; /* 内边距 */\r\n        border-radius: 5px; /* 圆角边框 */\r\n      }\r\n\r\n      &:hover .image-caption {\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n\r\n  .total {\r\n    position: absolute;\r\n    bottom: 80px;\r\n    left: 30px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .price {\r\n    position: absolute;\r\n    bottom: 80px;\r\n    right: 30px;\r\n    color: #e02020;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .button {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    background-color: #e02020;\r\n    color: white;\r\n    width: 80%;\r\n    padding: 10px;\r\n    border: none;\r\n    border-radius: 5px;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.night-mode {\r\n  background-color: #2e2e2e;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .body {\r\n  background-color: #2e2e2e;\r\n}\r\n\r\n.night-mode .header {\r\n  background-color: #3c3c3c;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .sidebar {\r\n  background-color: #3c3c3c;\r\n  border-right: 1px solid #444;\r\n}\r\n\r\n.night-mode .sidebar .el-menu-item {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .sidebar.el-menu-item:hover {\r\n  background-color: #4c4c4c;\r\n}\r\n\r\n.night-mode .main-content,\r\n.night-mode .profile-section,\r\n.night-mode .order-section,\r\n.night-mode .logistics-section,\r\n.night-mode .logistics-item,\r\n.night-mode .profile-card,\r\n.night-mode .promotion-card {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n\r\n.night-mode .order-icon,\r\n.night-mode .logistics-action {\r\n  color: #ffa500;\r\n}\r\n\r\n.night-mode .right-widget {\r\n  background-color: #3c3c3c;\r\n  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.night-mode .footer {\r\n  background-color: #2e2e2e;\r\n  border-top: 1px solid #333;\r\n}\r\n\r\n.night-mode .footer-links a {\r\n  color: #ffffff;\r\n}\r\n\r\n.night-mode .footer-links a:hover {\r\n  color: #e02020;\r\n}\r\n\r\n.night-mode .product-card {\r\n  background-color: #3c3c3c;\r\n}\r\n\r\n.night-mode .search-input {\r\n  background-color: #3c3c3c;\r\n  color: #e0e0e0;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}